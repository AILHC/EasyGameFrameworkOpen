!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).layer={})}(this,(function(e){"use strict";var t=function(){function e(){}return e.prototype.init=function(e,t,r,o){o&&(this._root=o),this.layerEnum=e,this.defaultType=t,this.classMap=r;for(var a,n,i,y,s=Object.keys(e).length/2,p=0;p<s;p++)y=(a=e[p].split("_"))[0],(n=a[1])||(n=y),(i=new(r&&this.classMap.has(y)?this.classMap.get(y):t)).onInit(n,p,this),this.addLayer(i)},e.prototype.setLayerRoot=function(e){e&&(this._root=e,this._layerMap&&this._layerMap.forEach((function(t){t.onAdd(e)})))},Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layerMap",{get:function(){return this._layerMap},enumerable:!1,configurable:!0}),e.prototype.addLayer=function(e){this._layerMap||(this._layerMap=new Map);var t=e.layerType;return this._layerMap.has(t)?(console.warn("\u3010\u5c42\u7ea7\u7ba1\u7406\u5668\u3011\u91cd\u590d\u6dfb\u52a0\u5c42\u7ea7 type:"+t+",name:"+e.layerName),!1):(this._layerMap.set(t,e),this._root&&e.onAdd(this._root),!0)},e.prototype.removeLayer=function(e){if(!this._layerMap||!this._layerMap.has(e))return!1;var t=this._layerMap.get(e);return t.onDestroy&&t.onDestroy(),this._layerMap.delete(e),!0},e.prototype.hideLayer=function(e){var t=this.getLayerByType(e);t&&t.onHide()},e.prototype.showLayer=function(e){var t=this.getLayerByType(e);t&&t.onShow()},e.prototype.addNodeToLayer=function(e,t){var r=this.getLayerByType(t);r&&r.onNodeAdd(e)},e.prototype.getLayerByType=function(e){var t=this._layerMap.get(e);return t||console.warn("\u3010\u5c42\u7ea7\u7ba1\u7406\u5668\u3011\u6ca1\u6709\u8fd9\u4e2a\u5c42\u7ea7:"+this.layerEnum[e]+","+e),t},e}();e.LayerMgr=t,Object.defineProperty(e,"__esModule",{value:!0})}));var globalTarget=window||global;globalTarget.layer?Object.assign({},globalTarget.layer):globalTarget.layer=layer;
