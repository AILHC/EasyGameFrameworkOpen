System.register("@ailhc/display-ctrl",[],(function(e){"use strict";return{execute:function(){var t=function(){function e(){this.handleMethodMap=new Map}return e.prototype.onRegist=function(){},e.prototype.on=function(e,t,i){var o=this.getIdEventKey(e,t),n=this.handleMethodMap.get(o);n||(n=[],this.handleMethodMap.set(o,n)),n.push(i)},e.prototype.once=function(e,t,i){i.__once=!0,this.on.apply(this,arguments)},e.prototype.off=function(e,t,i){var o=this.getIdEventKey(e,t),n=this.handleMethodMap.get(o);if(n)for(var a=void 0,r=n.length-1;r>=0;r--)(a=n[r])===i&&a._caller===i._caller&&(n[r]=n[n.length-1],n.pop())},e.prototype.emit=function(e,t,i){var o=this.getIdEventKey(e,t),n=this.handleMethodMap.get(o);if(n)for(var a=void 0,r=n.length-1;r>=0;r--)(a=n[r]).__once&&(n[r]=n[n.length-1],n.pop()),a.call(a._caller,a._args,i)},e.prototype.getIdEventKey=function(e,t){return e+"_*_"+t},e}(),i=function(){function e(e){this._option=e,this._templateLoadResConfigsMap={},this._loadedMap={},this._loadResIdMap={},this._resRefMap={},this._resInfoMap={},this._option||(this._option={})}return e.prototype.createView=function(e){var t,i,o,n,a=e.handleOption,r=void 0;return a&&(r=a.viewClass?new a.viewClass:null===(i=null===(t=a.createHandler)||void 0===t?void 0:t.createView)||void 0===i?void 0:i.call(t,e)),r||(r=null===(n=null===(o=this._option.createHandler)||void 0===o?void 0:o.createView)||void 0===n?void 0:n.call(o,e)),r},e.prototype.createViewState=function(e){var t,i,o,n,a=e.handleOption,r=void 0;return a&&(r=a.viewStateClass?new a.viewStateClass:null===(i=null===(t=a.createHandler)||void 0===t?void 0:t.createViewState)||void 0===i?void 0:i.call(t,e)),r||(r=null===(n=null===(o=this._option.createHandler)||void 0===o?void 0:o.createViewState)||void 0===n?void 0:n.call(o,e)),r},e.prototype.addToLayer=function(e){var t,i,o,n=e.template.handleOption;(null===(t=null==n?void 0:n.layerHandler)||void 0===t?void 0:t.addToLayer)?n.layerHandler.addToLayer(e):null===(o=null===(i=this._option.layerHandler)||void 0===i?void 0:i.addToLayer)||void 0===o||o.call(i,e)},e.prototype.removeFromLayer=function(e){var t,i,o,n=e.template.handleOption;(null===(t=null==n?void 0:n.layerHandler)||void 0===t?void 0:t.removeFromLayer)?n.layerHandler.removeFromLayer(e):null===(o=null===(i=this._option.layerHandler)||void 0===i?void 0:i.removeFromLayer)||void 0===o||o.call(i,e)},e.prototype.destroyView=function(e,t){},e.prototype.getPreloadResInfo=function(e){var t,i,o,n=this._resInfoMap[e.key];return n||((n=null===(t=e.getPreloadResInfo)||void 0===t?void 0:t.call(e))||(n=null===(o=(i=this._option).getPreloadResInfo)||void 0===o?void 0:o.call(i,e)),this._resInfoMap[e.key]=n),n},e.prototype.isLoaded=function(e){var t=this._loadedMap[e.key];return t||(t=!this._option.isLoaded||this._option.isLoaded(this.getPreloadResInfo(e))),t},e.prototype.loadRes=function(e){var t,i,o,n=this,a=e.id,r=e.template.key,s=this._templateLoadResConfigsMap[r];if(s?o=Object.keys(s).length>0:(s={},this._templateLoadResConfigsMap[r]=s),s[a]=e,!o){var l=null===(i=(t=this._option).loadRes)||void 0===i?void 0:i.call(t,this.getPreloadResInfo(e.template),(function(e){var t,i,o=n._templateLoadResConfigsMap[r];for(var a in e&&console.error(" templateKey ".concat(r," load error:"),e),n._templateLoadResConfigsMap[r]=void 0,Object.keys(o).length>0&&(e||(n._loadedMap[r]=!0)),o)(i=o[a])&&(null===(t=i.complete)||void 0===t||t.call(i,e),o[a]=void 0)}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i,o=n._templateLoadResConfigsMap[r];for(var a in o)(null==(i=o[a])?void 0:i.progress)&&i.progress.apply(null,e)}),e.loadOption);this._loadResIdMap[r]=l}},e.prototype.cancelLoad=function(e,t){var i,o,n,a=t.key,r=this._templateLoadResConfigsMap[a];if(r){var s=r[e];null===(i=null==s?void 0:s.complete)||void 0===i||i.call(s,"cancel load",!0),delete r[e]}if(!Object.keys(r).length){var l=this._loadResIdMap[a];l&&(delete this._loadResIdMap[a],null===(n=(o=this._option).cancelLoadRes)||void 0===n||n.call(o,l,this.getPreloadResInfo(t)))}},e.prototype.addResRef=function(e,t){var i,o,n=this._resRefMap[e];n||(n=[],this._resRefMap[e]=n),n.push(e),null===(o=(i=this._option).addResRef)||void 0===o||o.call(i,t)},e.prototype.decResRef=function(e,t){var i,o,n=this._resRefMap[e];if(n){var a=n.indexOf(e);a>-1&&(0===a?n.pop():n[a]=n.pop())}null===(o=(i=this._option).decResRef)||void 0===o||o.call(i,this.getPreloadResInfo(t)),n.length<=0&&(this._loadedMap[t.key]=!1)},e.prototype.destroyRes=function(e){var t,i,o=this._templateLoadResConfigsMap[e.key];if(o&&Object.keys(o).length)return!1;var n=this._resRefMap[e.key];return!(n&&n.length>0)&&(this._loadedMap[e.key]=!1,null===(i=(t=this._option).destroyRes)||void 0===i||i.call(t,this.getPreloadResInfo(e)),!0)},e}();
/*! *****************************************************************************
            Copyright (c) Microsoft Corporation.

            Permission to use, copy, modify, and/or distribute this software for any
            purpose with or without fee is hereby granted.

            THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
            REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
            AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
            INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
            LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
            OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
            PERFORMANCE OF THIS SOFTWARE.
            ***************************************************************************** */
function o(e,t,i,o){return new(i||(i=Promise))((function(n,a){function r(e){try{l(o.next(e))}catch(e){a(e)}}function s(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,s)}l((o=o.apply(e,t||[])).next())}))}function n(e,t){var i,o,n,a,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,o&&(n=2&a[0]?o.return:a[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,a[1])).done)return n;switch(o=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(n=r.trys,(n=n.length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){r.label=a[1];break}if(6===a[0]&&r.label<n[1]){r.label=n[1],n=a;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(a);break}n[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{i=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}var a=function(){function e(){}return e.prototype.onCreate=function(e){this._isConstructed||(this._isConstructed=!0,this._option=e)},e.prototype.initAndShowView=function(){this.initView(),this.needShowView&&(this.isViewInited?this.showView():console.error("id:".concat(this.id," isViewInited is false")))},e.prototype.onShow=function(e){var t=this;if(this.showCfg=e,this.needDestroy=!1,this.needHide=!1,this.needShowView=e.needShowView,this._needDestroyRes=!1,this.viewIns&&(this.showingPromise&&(this.showingPromise=void 0),this.hidingPromise&&(this.hidingPromise=void 0),this.hideViewIns()),this.isHoldTemplateResRef||this.viewMgr.isPreloadResLoaded(this.id))this.initAndShowView();else if(!this.isLoading){this.isLoading=!0,this.viewMgr.preloadResById(this.id,(function(e){t.isLoading=!1,e||t.destroyed||t.initAndShowView()}),e.loadOption)}},e.prototype.onUpdate=function(e){var t;if(!this.destroyed){var i=this.viewIns;this.isViewInited?null===(t=null==i?void 0:i.onUpdateView)||void 0===t||t.call(i,e):this.updateState=e}},e.prototype.onHide=function(e){var t,i;return o(this,void 0,void 0,(function(){var o,a;return n(this,(function(n){switch(n.label){case 0:return o=this.viewIns,this.hideCfg=e,this.needHide=!0,this.needDestroy=null===(t=this.hideCfg)||void 0===t?void 0:t.destroyAfterHide,this.showingPromise=void 0,this.isLoading&&(this.isLoading=!1,this.viewMgr.cancelPreloadRes(this.id)),this.viewMgr.eventHandler.emit(this.id,"onViewHide"),this.isViewShowed=!1,this.isViewShowEnd=!1,o&&(a=null===(i=o.onPlayAnim)||void 0===i?void 0:i.call(o,!1,null==e?void 0:e.hideOption),this.hidingPromise=a),a?[4,a]:[3,2];case 1:if(n.sent(),this.hidingPromise!==a)return[2];this.hidingPromise=void 0,n.label=2;case 2:return this.hideViewIns(),this.needDestroy&&this.entryDestroyed(),[2]}}))}))},e.prototype.onDestroy=function(e){this.hidingPromise&&(this.hidingPromise=void 0),this.showingPromise&&(this.showingPromise=void 0),this.isLoading&&(this.isLoading=!1,this.viewMgr.cancelPreloadRes(this.id)),this._needDestroyRes=e,this.hideViewIns(),this.entryDestroyed()},e.prototype.initView=function(){var e;if(!this.isViewInited){var t=this.viewMgr.createView(this);this.viewMgr.addTemplateResRef(this),!this.isViewInited&&t&&(null===(e=t.onInitView)||void 0===e||e.call(t,this.showCfg.onInitData),this.isViewInited=!0,this.viewMgr.eventHandler.emit(this.id,"onViewInit"))}},e.prototype.showView=function(){var e,t,i,o=this,n=this.viewIns;null===(e=n.onBeforeViewShow)||void 0===e||e.call(n,this.showCfg.onShowData),this.addToLayer(this),null===(t=n.onShowView)||void 0===t||t.call(n,this.showCfg.onShowData),this.viewMgr.eventHandler.emit(this.id,"onViewShow");var a,r=null===(i=n.onPlayAnim)||void 0===i?void 0:i.call(n,!0);this.showingPromise=r,this.isViewShowed=!0,this.needShowView=!1,this.updateState&&n.onUpdateView&&(n.onUpdateView(this.updateState),this.updateState=void 0),null!==(a=this.showingPromise)&&"object"==typeof a&&"function"==typeof a.then&&"function"==typeof a.catch?this.showingPromise.then((function(){o.showingPromise===r&&(o.showingPromise=void 0,o.entryShowEnd())})):this.entryShowEnd()},e.prototype.entryShowEnd=function(){this.isViewShowEnd=!0,this.viewMgr.eventHandler.emit(this.id,"onViewShowEnd")},e.prototype.hideViewIns=function(){var e,t;this.needHide=!1;var i=this.hideCfg;this.viewIns&&(this.removeFromLayer(this),null===(t=(e=this.viewIns).onHideView)||void 0===t||t.call(e,null==i?void 0:i.hideOption)),this._option.canDecTemplateResRefOnHide&&(null==i?void 0:i.decTemplateResRef)&&this.viewMgr.decTemplateResRef(this),this.hideCfg=void 0,this.viewMgr.eventHandler.emit(this.id,"onViewHideEnd")},e.prototype.entryDestroyed=function(){var e,t=this.viewMgr,i=this.viewIns;this.needDestroy=!1,this.destroyed=!0,this.isViewInited=!1,i&&(null===(e=i.onDestroyView)||void 0===e||e.call(i),this.viewIns=void 0);var o=this.template,n=t.templateHandler;null==n||n.destroyView(i,o),t.decTemplateResRef(this),(this._needDestroyRes||this._option.destroyResOnDestroy)&&t.destroyRes(o.key),this._needDestroyRes=!1,t.eventHandler.emit(this.id,"onViewDestroyed")},e.prototype.addToLayer=function(e){if(e.template){var t=this.viewMgr.templateHandler;(null==t?void 0:t.addToLayer)?t.addToLayer(e):console.error("".concat(e.template.key," \u6ca1\u6709\u53d6\u5230\u6dfb\u52a0\u5230\u5c42\u7ea7\u7684\u65b9\u6cd5"))}},e.prototype.removeFromLayer=function(e){if(e.template){var t=this.viewMgr.templateHandler;(null==t?void 0:t.removeFromLayer)?t.removeFromLayer(e):console.error("".concat(e.template.key," \u6ca1\u6709\u53d6\u5230\u4ece\u5c42\u7ea7\u79fb\u9664\u7684\u65b9\u6cd5"))}},e}(),r=function(){function e(e){this._option=e,this._option||(this._option={maxSize:5})}return e.prototype.onViewStateShow=function(e){this.put(e.id,e)},e.prototype.onViewStateUpdate=function(e){this.get(e.id)},e.prototype.onViewStateHide=function(e){},e.prototype.onViewStateDestroy=function(e){this.cache.delete(e.id)},e.prototype.get=function(e){if(this.cache.has(e)){var t=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,t),t}},e.prototype.put=function(e,t){var i,o,n=this._option.maxSize,a=this.cache;if(a.has(e))a.delete(e);else if(a.size>=n){var r=a.size-n,s=0;try{for(var l=function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],o=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(a.keys()),d=l.next();!d.done;d=l.next()){var h=d.value;if(!(s<r))break;a.get(h).isViewShowed||a.delete(h),s++}}catch(e){i={error:e}}finally{try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}console.log("refresh: key:".concat(e," , value:").concat(t))}a.set(e,t)},e.prototype.toString=function(){console.log("maxSize",this._option.maxSize),console.table(this.cache)},e}(),s={},l="_$_";e("ViewMgr",function(){function e(){this._viewCount=0}return Object.defineProperty(e.prototype,"cacheHandler",{get:function(){return this._cacheHandler},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventHandler",{get:function(){return this._eventHandler},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"templateHandler",{get:function(){return this._templateHandler},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"option",{get:function(){return this._option},enumerable:!1,configurable:!0}),e.prototype.getKey=function(e){return e},e.prototype.init=function(e){if(!this._inited){this._eventHandler=(null==e?void 0:e.eventHandler)?null==e?void 0:e.eventHandler:new t,this._cacheHandler=(null==e?void 0:e.cacheHandler)?null==e?void 0:e.cacheHandler:new r(null==e?void 0:e.defaultCacheHandlerOption),this._viewStateMap={};var o=null==e?void 0:e.templateHandler;o||(o=new i(null==e?void 0:e.defaultTplHandlerInitOption)),this._templateHandler=o,this._viewStateCreateOption=(null==e?void 0:e.viewStateCreateOption)?null==e?void 0:e.viewStateCreateOption:{},this._inited=!0,this._option=e||{};var n=(null==e?void 0:e.templateMap)?null==e?void 0:e.templateMap:s;this._templateMap=n?Object.assign({},n):{}}},e.prototype.use=function(e,t){var i;e&&(e.viewMgr=this,null===(i=e.onUse)||void 0===i||i.call(e,t))},e.prototype.template=function(e){if(e)if(this._inited)if(Array.isArray(e)){var t=void 0;for(var i in e)"object"==typeof(t=e[i])?this._addTemplate(t):this._addTemplate({key:t})}else"object"==typeof e?this._addTemplate(e):"string"==typeof e&&this._addTemplate({key:e});else console.error("[viewMgr](template): is no inited")},e.prototype.hasTemplate=function(e){return!!this._templateMap[e]},e.prototype.getTemplate=function(e){var t=this._templateMap[e];return t||console.warn("template is not exit:".concat(e)),t},e.prototype._addTemplate=function(e){if(e)if(this._inited){var t=e.key;"string"==typeof t&&""!==t?this._templateMap[t]?console.error("[viewMgr](_addTemplate): [key:".concat(t,"] is exit")):this._templateMap[t]=e:console.error("[viewMgr](_addTemplate): key is null")}else console.error("[viewMgr](_addTemplate): is no inited")},e.prototype.getPreloadResInfo=function(e){var t=this.getTemplate(e);if(t)return this._templateHandler.getPreloadResInfo(t)},e.prototype.preloadResById=function(e,t,i,o){var n,a;if(this._inited){var r,s;s="object"==typeof e?e:{id:e},r=this.getKeyById(s.id);var l=this.getTemplate(r);if(l){s.template=l,t&&"function"==typeof t&&(s.complete=t),o&&"function"==typeof o&&(s.progress=o),void 0!==i&&(s.loadOption=i),l.loadOption&&(s.loadOption=Object.assign({},l.loadOption,s.loadOption));var d=this._templateHandler;d.loadRes&&!(null===(n=d.isLoaded)||void 0===n?void 0:n.call(d,l))?d.loadRes(s):null===(a=s.complete)||void 0===a||a.call(s)}}else console.error("viewMgr is no inited")},e.prototype.cancelPreloadRes=function(e){if(e){var t=this.getKeyById(e),i=this.getTemplate(t);this._templateHandler.cancelLoad(e,i)}},e.prototype.preloadRes=function(e){for(var t,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(this._inited)if(e&&!e.includes(l)){var n,a=i[0];"object"==typeof a?n=n:"function"==typeof a&&(n={complete:a,id:void 0});var r=i[1];n||(n={});var s=i[2];if(s){if("function"!=typeof s)return void console.error("arg progress is not a function");n.progress=s}n.id=this.createViewId(e);var d=this.getTemplate(e);if(d)return void 0!==r&&(n.loadOption=r),this.preloadResById(n),n.id;var h="template:".concat(e," not registed");null===(t=null==n?void 0:n.complete)||void 0===t||t.call(n,h)}else{var p="key:".concat(e," is id");console.error(p)}else console.error("[viewMgr](loadRess): is no inited")},e.prototype.destroyRes=function(e){var t=this.getTemplate(e);if(t){var i=this._templateHandler;if(i.destroyRes)return i.destroyRes(t);console.warn("can not handle template:".concat(t.key," destroyRes"))}},e.prototype.isPreloadResLoaded=function(e){if(this._inited){var t;t="object"==typeof e?e:this.getTemplate(this.getKeyById(e));var i=this._templateHandler;return!i.isLoaded||i.isLoaded(t)}console.error("viewMgr is no inited")},e.prototype.addTemplateResRef=function(e){if(e&&!e.isHoldTemplateResRef){var t=e.id,i=e.template;this._templateHandler.addResRef(t,i),e.isHoldTemplateResRef=!0}},e.prototype.decTemplateResRef=function(e){if(e&&e.isHoldTemplateResRef){var t=e.template,i=e.id;this._templateHandler.decResRef(i,t),e.isHoldTemplateResRef=!1}},e.prototype.create=function(e,t,i,o,n){if(this._inited){var a;if("string"==typeof e)a={key:e,onInitData:t,onShowData:o,needShowView:i};else{if("object"!=typeof e)return void console.warn("(create) unknown param",e);a=e,void 0!==o&&(a.onShowData=o),void 0!==t&&(a.onInitData=t),void 0!==i&&(a.needShowView=i)}a.id=this.createViewId(a.key);var r=this.createViewState(a.id);return r?(n&&(r.cacheMode=n),"FOREVER"===r.cacheMode&&(this._viewStateMap[r.id]=r),this._showViewState(r,a),r):void 0}console.error("[viewMgr](show) is no inited")},e.prototype.show=function(e,t,i){var o,n,a,r,s;if("string"==typeof e)s=r=e,n=!0;else{if("object"!=typeof e)return void console.warn("[viewMgr](show) unknown param",e);e.__$flag?a=e:(o=e,void 0!==t&&(o.onShowData=t),void 0!==i&&(o.onInitData=i))}if(o||(o={id:r,key:s,onInitData:i,onShowData:t}),a||(a=this.getOrCreateViewState(o.id)),a)return n&&!a.cacheMode&&(a.cacheMode="FOREVER"),o.needShowView=!0,this._showViewState(a,o),null==a?void 0:a.id},e.prototype._showViewState=function(e,t){var i,o;if(this._inited){if(e){e.onShow(t);var n=e.cacheMode;n&&"FOREVER"!==n&&(null===(o=null===(i=this._cacheHandler)||void 0===i?void 0:i.onViewStateShow)||void 0===o||o.call(i,e))}}else console.error("viewMgr is no inited")},e.prototype.update=function(e,t){var i,o;if(this._inited){var n="object"==typeof e?e:void 0;if(n="object"==typeof e?e:this.getViewState(e)){n.onUpdate(t);var a=n.cacheMode;a&&"FOREVER"!==a&&(null===(o=null===(i=this._cacheHandler)||void 0===i?void 0:i.onViewStateUpdate)||void 0===o||o.call(i,n))}}else console.error("viewMgr is no inited")},e.prototype.hide=function(e,t){var i,o;if(this._inited){var n="object"==typeof e?e:void 0,a=(n="object"==typeof e?e:this.getViewState(e)).cacheMode;n.onHide(t),a&&"FOREVER"!==a&&(null===(o=null===(i=this._cacheHandler)||void 0===i?void 0:i.onViewStateHide)||void 0===o||o.call(i,n)),(null==t?void 0:t.destroyAfterHide)&&this.deleteViewState(n.id)}else console.error("viewMgr is no inited")},e.prototype.destroy=function(e,t){var i,o;if(this._inited){var n="object"==typeof e?e:void 0,a=(n="object"==typeof e?e:this.getViewState(e)).cacheMode;n.onDestroy(t),a&&"FOREVER"!==a&&(null===(o=null===(i=this._cacheHandler)||void 0===i?void 0:i.onViewStateDestroy)||void 0===o||o.call(i,n)),this.deleteViewState(e)}else console.error("viewMgr is no inited")},e.prototype.isViewInited=function(e){var t;return null==(t="object"!=typeof e?this.getViewState(e):e)?void 0:t.isViewInited},e.prototype.isViewShowed=function(e){var t;return null==(t="object"!=typeof e?this.getViewState(e):e)?void 0:t.isViewShowed},e.prototype.createView=function(e){var t=e.template;if(this.isPreloadResLoaded(t)){var i=e.viewIns;return i||((i=this._templateHandler.createView(t))?(i.viewState=e,e.viewIns=i):console.warn("key:".concat(t.key," ins fail")),i)}},e.prototype.getViewState=function(e){return this._viewStateMap[e]},e.prototype.getOrCreateViewState=function(e){var t=this._viewStateMap[e];return t||(t=this.createViewState(e)),t?this._viewStateMap[e]=t:console.error("id:".concat(e,",viewState is null")),t},e.prototype.createViewState=function(e){var t,i,o,n=this.getKeyById(e),r=this.getTemplate(n);if(r)return(o=null===(i=(t=this._templateHandler).createViewState)||void 0===i?void 0:i.call(t,r))||(o=new a),o&&(o.onCreate(Object.assign({},this._viewStateCreateOption,r.viewStateCreateOption)),o.id=e,o.viewMgr=this,o.template=r,o.cacheMode||(o.cacheMode=r.cacheMode),o.__$flag=1),o},e.prototype.deleteViewState=function(e){delete this._viewStateMap[e]},e.prototype.getViewIns=function(e){var t=this._viewStateMap[e];return null==t?void 0:t.viewIns},e.prototype.createViewId=function(e){return e.includes(l)?e:(this._viewCount++,"".concat(e).concat(l).concat(this._viewCount))},e.prototype.getKeyById=function(e){if("string"==typeof e&&""!==e)return e.includes(l)?e.split(l)[0]:e},e}())}}}));
