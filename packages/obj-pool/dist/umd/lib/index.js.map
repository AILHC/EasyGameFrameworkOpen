{"version":3,"file":"index.js","sources":["../../../src/obj-pool.ts","../../../src/obj-pool-mgr.ts"],"sourcesContent":["type Clas<T = {}> = new (...args: any[]) => T;\nexport class BaseObjPool<T> implements objPool.IPool<T> {\n\n    private _poolObjs: objPool.IObj[];\n    private _usedPoolMap: Map<objPool.IObj, objPool.IObj>;\n    public get poolObjs(): objPool.IObj[] {\n        return this._poolObjs;\n    }\n    private _sign: string;\n    public get sign(): string {\n        return this._sign;\n    }\n    private _createFunc: (...args) => T;\n    protected _objHandler: objPool.IObjHandler;\n    public get size(): number {\n        const poolObjs = this._poolObjs;\n        return poolObjs ? poolObjs.length : 0;\n    }\n    public get usedCount(): number {\n        return this._usedPoolMap ? this._usedPoolMap.size : 0;\n    }\n    public initByFunc(sign: string, createFunc: (...args: any[]) => T, createArgs?: any[]): objPool.IPool<T> {\n        if (!this._sign) {\n            this._sign = sign;\n            this._poolObjs = [];\n            this._usedPoolMap = new Map();\n            this._createFunc = createFunc.bind(null, createArgs);\n        } else {\n            this._loghasInit();\n        }\n        return this;\n\n    }\n    public setObjHandler(objHandler: objPool.IObjHandler): void {\n        this._objHandler = objHandler;\n    }\n    public initByClass(sign: string, clas: Clas<T>, args?: any[]): objPool.IPool<T> {\n        if (!this._sign) {\n            this._sign = sign;\n            this._poolObjs = [];\n            this._usedPoolMap = new Map();\n            this._createFunc = function (...args) {\n                return new clas(args);\n            }.bind(null, args);\n        } else {\n            this._loghasInit();\n        }\n        return this;\n    }\n    public preCreate(num: number) {\n        if (!this._sign) {\n            this._logNotInit();\n            return;\n        }\n        const poolObjs = this._poolObjs;\n        let obj: objPool.IObj;\n        for (let i = 0; i < num; i++) {\n            obj = this._createFunc();\n            obj.onCreate && obj.onCreate(this);\n            obj.poolSign = this._sign;\n            obj.isInPool = true;\n            poolObjs.push(obj);\n        }\n    }\n    public clear(): void {\n        const poolObjs = this.poolObjs;\n        if (poolObjs) {\n            let poolObj: objPool.IObj;\n            for (let i = 0; i < poolObjs.length; i++) {\n                poolObj = poolObjs[i];\n                poolObj && poolObj.onKill();\n                this._objHandler && this._objHandler.onKill(poolObj);\n            }\n            poolObjs.length = 0;\n        }\n\n\n    }\n    public kill(obj: T): void {\n        this._usedPoolMap.delete(obj);\n    }\n    public free(obj: T extends objPool.IObj ? T : any): void {\n        if (!this._sign) {\n            this._logNotInit();\n            return;\n        }\n        if (!obj.isInPool) {\n            obj.onFree && obj.onFree();\n            this._objHandler && this._objHandler.onFree(obj);\n            this._poolObjs.push(obj);\n            this._usedPoolMap.delete(obj);\n        } else {\n            console.warn(`pool :${this._sign} obj is in pool`);\n        }\n    }\n    public freeAll() {\n        this._usedPoolMap.forEach((value) => {\n            this.free(value as any);\n        });\n        this._usedPoolMap.clear();\n    }\n    public get(...args: any[]): T {\n        if (!this._sign) {\n            this._logNotInit();\n            return;\n        }\n\n        let obj: objPool.IObj;\n        if (this.poolObjs.length) {\n            obj = this._poolObjs.pop();\n        } else {\n            obj = this._createFunc();\n            obj.onCreate && obj.onCreate(this);\n            obj.poolSign = this._sign;\n        }\n        this._usedPoolMap.set(obj, obj);\n        obj.isInPool = false;\n        obj.onGet && obj.onGet(...args);\n        this._objHandler && this._objHandler.onGet(obj, ...args);\n\n        return obj as T;\n    }\n    private _loghasInit() {\n        console.warn(`对象池${this._sign}已经初始化`);\n    }\n    private _logNotInit() {\n        console.error(`对象池还没初始化`);\n    }\n}","import { BaseObjPool } from \"./obj-pool\";\nconst logType = {\n    poolIsNull: \"对象池不存在\",\n    poolExit: \"对象池已存在\",\n    signIsNull: \"sign is null\",\n};\nexport class ObjPoolMgr<SignType = any> implements objPool.IPoolMgr<SignType> {\n\n\n    private _poolDic: { [key in keyof SignType]: BaseObjPool<any> } = {} as any;\n    private _cid: number = 1;\n    public destroyPool(sign: keyof SignType): void {\n        const poolDic = this._poolDic;\n        const pool = poolDic[sign];\n        if (pool) {\n            pool.clear();\n            poolDic[sign] = undefined;\n        } else {\n            this._log(`${logType.poolIsNull}${sign}`);\n        }\n    }\n    public preCreate<T>(sign: keyof SignType, preCreateCount: number): void {\n        const pool = this._poolDic[sign];\n        if (pool) {\n            pool.preCreate(preCreateCount);\n        } else {\n            this._log(`${logType.poolIsNull}${sign}`);\n        }\n    }\n    public clearPool(sign: keyof SignType): void {\n        const pool = this._poolDic[sign];\n        if (pool) {\n            pool.clear();\n        }\n    }\n    public free(obj: objPool.IObj): void {\n        const pool = this._poolDic[obj.poolSign];\n        if (pool) {\n            pool.free(obj);\n        }\n    }\n    public freeAll(sign: keyof SignType) {\n        const pool = this._poolDic[sign];\n        if (pool) {\n            pool.freeAll();\n        }\n    }\n    public createByClass(cls: any, sign?: keyof SignType, ...initArgs): void {\n        if (this.hasPool(sign)) {\n            this._log(`${logType.poolExit}${sign}`);\n            return;\n        }\n        sign = sign ? sign : this._getClassSign(cls) as any;\n        const pool = new BaseObjPool();\n        pool.initByClass(sign as string, cls, ...initArgs);\n        this._poolDic[sign] = pool;\n    }\n    public createByFunc(sign: keyof SignType, createFunc: (...createArgs) => objPool.IObj, ...createArgs): void {\n        if (this.hasPool(sign)) {\n            this._log(`${logType.poolExit}${sign}`);\n            return;\n        }\n        if (!sign || typeof sign === \"string\" && sign.trim() === \"\") {\n            const pool = new BaseObjPool();\n            pool.initByFunc(sign as string, createFunc, ...createArgs);\n            this._poolDic[sign] = pool;\n        } else {\n            this._log(`${logType.signIsNull}`);\n        }\n    }\n    public setObjPoolHandler(sign: keyof SignType, objHandler: objPool.IObjHandler) {\n        const pool = this._poolDic[sign];\n        if (pool) {\n            pool.setObjHandler(objHandler);\n        }\n    }\n    public get<T>(sign: keyof SignType, ...onGetArgs: any[]): T extends objPool.IObj ? T : objPool.IObj {\n        const pool = this._poolDic[sign];\n        return pool ? pool.get(...onGetArgs) : undefined;\n    }\n    public getPoolObjsBySign<T>(sign: keyof SignType): T extends objPool.IObj ? T : objPool.IObj[] {\n        const pool = this._poolDic[sign];\n\n        return pool ? pool.poolObjs as any : undefined;\n    }\n    public hasPool(sign: keyof SignType): boolean {\n        return !!this._poolDic[sign];\n    }\n    public getPool<T>(sign: keyof SignType): objPool.IPool<T> {\n        return this._poolDic[sign];\n    }\n    private _log(msg: string, level: number = 1) {\n        const tagStr = \"[对象池管理器]\";\n        switch (level) {\n            case 0:\n                console.log(tagStr + msg);\n                break;\n            case 1:\n                console.warn(tagStr + msg);\n            case 2:\n                console.error(tagStr + msg);\n            default:\n                console.log(tagStr + msg);\n                break;\n        }\n    }\n    /**\n     * 返回类的唯一标识\n     */\n    private _getClassSign(cla: new () => any): string {\n        let name: string = cla[\"__name\"] || cla[\"_$cid\"];\n        if (!name) {\n            cla[\"_$=cid\"] = name = this._cid + \"\";\n            this._cid++;\n        }\n        return name;\n    }\n\n}"],"names":[],"mappings":"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"}