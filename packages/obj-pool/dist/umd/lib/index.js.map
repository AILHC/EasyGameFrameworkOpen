{"version":3,"file":"index.js","sources":["../../../src/obj-pool.ts","../../../src/obj-pool-mgr.ts"],"sourcesContent":["export class BaseObjPool<T extends objPool.IObj = any, onGetDataType = any, SignType = any>\n    implements objPool.IPool<T, onGetDataType, SignType> {\n    private _poolObjs: objPool.IObj[];\n    private _usedObjMap: Map<objPool.IObj, objPool.IObj>;\n    public get poolObjs(): objPool.IObj[] {\n        return this._poolObjs;\n    }\n    private _sign: keyof SignType;\n    public get sign(): keyof SignType {\n        return this._sign;\n    }\n    private _createFunc: (...args) => T;\n    protected _objHandler: objPool.IObjHandler;\n    public get size(): number {\n        const poolObjs = this._poolObjs;\n        return poolObjs ? poolObjs.length : 0;\n    }\n    public get usedCount(): number {\n        return this._usedObjMap ? this._usedObjMap.size : 0;\n    }\n    public threshold: number;\n    public init(opt: objPool.IPoolInitOption<T, onGetDataType, SignType>): objPool.IPool<T, onGetDataType> {\n        if (!this._sign) {\n            if (!opt.sign) {\n                console.log(`[objPool] sign is undefind`);\n                return;\n            }\n            if (!opt.createFunc && !opt.clas) {\n                console.error(`[objPool] sign:${opt.sign}  no createFunc and class`);\n                return;\n            }\n            this._sign = opt.sign;\n            this._poolObjs = [];\n            this._usedObjMap = new Map();\n            this.threshold = opt.threshold;\n            const clas = opt.clas;\n            if (opt.createFunc) {\n                this._createFunc = opt.createFunc;\n            } else if (opt.clas) {\n                this._createFunc = function () {\n                    return new clas();\n                };\n            }\n            this._objHandler = opt.objHandler;\n        } else {\n            this._loghasInit();\n        }\n        return this;\n    }\n    public initByFunc(sign: string, createFunc: () => T): objPool.IPool<T, onGetDataType> {\n        if (!this._sign) {\n            this._sign = sign as any;\n            this._poolObjs = [];\n            this._usedObjMap = new Map();\n            this._createFunc = createFunc;\n        } else {\n            this._loghasInit();\n        }\n        return this;\n    }\n    public initByClass(sign: string, clas: objPool.Clas<T>): objPool.IPool<T, onGetDataType> {\n        if (!this._sign) {\n            this._sign = sign as any;\n            this._poolObjs = [];\n            this._usedObjMap = new Map();\n            this._createFunc = function () {\n                return new clas();\n            };\n        } else {\n            this._loghasInit();\n        }\n        return this;\n    }\n    public setObjHandler(objHandler: objPool.IObjHandler<onGetDataType>): void {\n        this._objHandler = objHandler;\n    }\n\n    public preCreate(num: number) {\n        if (!this._sign) {\n            this._logNotInit();\n            return;\n        }\n        const poolObjs = this._poolObjs;\n        let obj: objPool.IObj;\n        const handler = this._objHandler;\n        for (let i = 0; i < num; i++) {\n            obj = this._createFunc();\n            if (obj && obj.onCreate) {\n                obj.onCreate(this);\n            } else if (handler && handler.onCreate) {\n                handler.onCreate(obj);\n            }\n            obj.poolSign = this._sign as any;\n            obj.isInPool = true;\n            poolObjs.push(obj);\n        }\n    }\n    public clear(): void {\n        const poolObjs = this.poolObjs;\n        if (poolObjs) {\n            let poolObj: objPool.IObj;\n            for (let i = 0; i < poolObjs.length; i++) {\n                poolObj = poolObjs[i];\n                this.kill(poolObj as any);\n            }\n            poolObjs.length = 0;\n        }\n    }\n    public kill(obj: T extends objPool.IObj ? T : any): void {\n        if (this._usedObjMap.has(obj)) {\n            const handler = this._objHandler;\n            if (obj.onFree) {\n                obj.onFree();\n            } else if (handler && handler.onFree) {\n                handler.onFree(obj);\n            }\n            this._usedObjMap.delete(obj);\n        }\n        const handler = this._objHandler;\n        if (obj && obj.onKill) {\n            obj.onKill();\n        } else if (handler && handler.onKill) {\n            handler.onKill(obj);\n        }\n    }\n    public free(obj: T extends objPool.IObj ? T : any): void {\n        if (!this._sign) {\n            this._logNotInit();\n            return;\n        }\n        if (!obj.isInPool) {\n            const handler = this._objHandler;\n            if (this.threshold && this.size >= this.threshold) {\n                this.kill(obj);\n                return;\n            }\n            if (obj.onFree) {\n                obj.onFree();\n            } else if (handler && handler.onFree) {\n                handler.onFree(obj);\n            }\n            this._poolObjs.push(obj);\n            this._usedObjMap.delete(obj);\n        } else {\n            console.warn(`pool :${this._sign} obj is in pool`);\n        }\n    }\n    public freeAll() {\n        this._usedObjMap.forEach((value) => {\n            this.free(value as any);\n        });\n        this._usedObjMap.clear();\n    }\n    public get(onGetData?: onGetDataType): T {\n        if (!this._sign) {\n            this._logNotInit();\n            return;\n        }\n\n        let obj: objPool.IObj;\n        if (this.poolObjs.length) {\n            obj = this._poolObjs.pop();\n        } else {\n            obj = this._createFunc();\n            obj.onCreate && obj.onCreate(this);\n            obj.poolSign = this._sign as any;\n        }\n        this._usedObjMap.set(obj, obj);\n        obj.isInPool = false;\n        const handler = this._objHandler;\n        if (obj.onGet) {\n            obj.onGet(onGetData);\n        } else if (handler && handler.onGet) {\n            handler.onGet(obj, onGetData);\n        }\n        return obj as T;\n    }\n    public getMore(onGetData?: onGetDataType, num: number = 1): T[] {\n        const objs = [];\n        if (!isNaN(num) && num > 1) {\n            for (let i = 0; i < num; i++) {\n                objs.push(this.get(onGetData));\n            }\n        } else {\n            objs.push(this.get(onGetData));\n        }\n        return objs as any;\n    }\n    private _loghasInit() {\n        console.warn(`objpool ${this._sign} already inited`);\n    }\n    private _logNotInit() {\n        console.error(`objpool is not init`);\n    }\n}\n","import { BaseObjPool } from \"./obj-pool\";\nconst logType = {\n    poolIsNull: \"objPool is null\",\n    poolExit: \"objPool is exit\",\n    signIsNull: \"sign is null\"\n};\nexport class ObjPoolMgr<SignType = any, GetDataType = any> implements objPool.IPoolMgr<SignType, GetDataType> {\n    private _poolDic: { [key in keyof SignType]: objPool.IPool<any> } = {} as any;\n    public setObjPoolThreshold<keyType extends keyof SignType = any>(sign: keyType, threshold: number): void {\n        const pool = this._poolDic[sign];\n        if (pool) {\n            pool.threshold = threshold;\n        } else {\n            this._log(`${logType.poolIsNull}:${sign}`);\n        }\n    }\n    public setObjPoolHandler<keyType extends keyof SignType = any>(sign: keyType, objHandler: objPool.IObjHandler) {\n        const pool = this._poolDic[sign];\n        if (pool) {\n            pool.setObjHandler(objHandler);\n        } else {\n            this._log(logType.poolIsNull);\n        }\n    }\n    createObjPool<T = any>(opt: objPool.IPoolInitOption<T, GetDataType, SignType>): objPool.IPool<T, GetDataType> {\n        const sign = opt.sign;\n        if (this.hasPool(sign)) {\n            this._log(`${logType.poolExit}${sign}`);\n            return;\n        }\n        if (sign && (sign as string).trim() !== \"\") {\n            let pool: objPool.IPool = new BaseObjPool();\n            pool = pool.init(opt);\n            if (pool) {\n                this._poolDic[sign] = pool;\n            }\n            return pool;\n        } else {\n            this._log(`${logType.signIsNull}`);\n        }\n    }\n    public createByClass(sign: keyof SignType, cls: any): void {\n        if (this.hasPool(sign)) {\n            this._log(`${logType.poolExit}${sign}`);\n            return;\n        }\n        if (sign && (sign as string).trim() !== \"\") {\n            const pool = new BaseObjPool();\n            pool.initByClass(sign as string, cls);\n            this._poolDic[sign] = pool;\n        } else {\n            this._log(`${logType.signIsNull}`);\n        }\n    }\n    public createByFunc<T = any>(sign: keyof SignType, createFunc: () => T): void {\n        if (this.hasPool(sign)) {\n            this._log(`${logType.poolExit}${sign}`);\n            return;\n        }\n        if (sign && (sign as string).trim() !== \"\") {\n            const pool = new BaseObjPool();\n            pool.initByFunc(sign as string, createFunc);\n            this._poolDic[sign] = pool;\n        } else {\n            this._log(`${logType.signIsNull}`);\n        }\n    }\n    public hasPool(sign: keyof SignType): boolean {\n        return !!this._poolDic[sign];\n    }\n    public getPool<T = any>(sign: keyof SignType): objPool.IPool<T> {\n        return this._poolDic[sign] as any;\n    }\n    public clearPool(sign: keyof SignType): void {\n        const pool = this._poolDic[sign];\n        if (pool) {\n            pool.clear();\n        }\n    }\n    public destroyPool(sign: keyof SignType): void {\n        const poolDic = this._poolDic;\n        const pool = poolDic[sign];\n        if (pool) {\n            pool.clear();\n            poolDic[sign] = undefined;\n        } else {\n            this._log(`${logType.poolIsNull}${sign}`);\n        }\n    }\n    public preCreate(sign: keyof SignType, preCreateCount: number): void {\n        const pool = this._poolDic[sign];\n        if (pool) {\n            pool.preCreate(preCreateCount);\n        } else {\n            this._log(`${logType.poolIsNull}${sign}`);\n        }\n    }\n    public get<T = any, keyType extends keyof SignType = any>(\n        sign: keyType,\n        onGetData?: GetDataType[objPool.ToAnyIndexKey<keyType, GetDataType>]\n    ): T {\n        const pool = this._poolDic[sign];\n        return pool ? pool.get(onGetData) : undefined;\n    }\n    public getMore<T, keyType extends keyof SignType = any>(\n        sign: keyType,\n        onGetData?: GetDataType[objPool.ToAnyIndexKey<keyType, GetDataType>],\n        num?: number\n    ): T extends objPool.IObj ? T[] : objPool.IObj[] {\n        const pool = this._poolDic[sign];\n        return pool ? (pool.getMore(onGetData, num) as any) : undefined;\n    }\n    public getPoolObjsBySign<T extends objPool.IObj>(\n        sign: keyof SignType\n    ): T extends objPool.IObj ? T[] : objPool.IObj[] {\n        const pool = this._poolDic[sign];\n\n        return pool ? (pool.poolObjs as any) : undefined;\n    }\n\n    public free(obj: objPool.IObj): void {\n        const pool = this._poolDic[obj.poolSign as keyof SignType];\n        if (pool) {\n            pool.free(obj);\n        }\n    }\n    public freeAll(sign: keyof SignType) {\n        const pool = this._poolDic[sign];\n        if (pool) {\n            pool.freeAll();\n        }\n    }\n    public kill(obj: objPool.IObj): void {\n        const pool = this._poolDic[obj.poolSign as keyof SignType];\n        if (pool) {\n            pool.kill(obj);\n        }\n    }\n\n    private _log(msg: string, level: number = 1) {\n        const tagStr = \"[objPool.ObjPoolMgr]\";\n        switch (level) {\n            case 0:\n                console.log(tagStr + msg);\n                break;\n            case 1:\n                console.warn(tagStr + msg);\n            case 2:\n                console.error(tagStr + msg);\n            default:\n                console.log(tagStr + msg);\n                break;\n        }\n    }\n}\n"],"names":[],"mappings":"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"}