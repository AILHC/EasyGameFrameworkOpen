{"version":3,"file":"index.min.js","sources":["@ailhc/egf-cli/src/classA.ts","@ailhc/egf-cli/src/classB.ts","@ailhc/egf-cli/src/classC.ts","@ailhc/egf-cli/src/classbc.ts","E:/framework_space/EasyGameFrameworkOpen/packages/core/dist/es/lib/index.mjs","@ailhc/egf-cli/src/refOtherPkg.ts"],"sourcesContent":["export class classA {\n    /**\n     * ffjfjf\n     * @param a\n     */\n    sayA(a: number) {}\n}\n","export class classB {\n    sayb(b: string) {\n        console.log(\"FDS\");\n    }\n}\n","// import {Generator} from  \"npm-dts\"\n\nexport class classC {\n    sayd(cc) {\n        console.log(cc);\n        // new Generator();\n    }\n}\n","export class bc {\n    constructor() {\n        console.log(\"bc\");\n    }\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\n\nvar App = (function () {\r\n    function App() {\r\n        this._state = 0;\r\n        this._moduleMap = {};\r\n    }\r\n    Object.defineProperty(App.prototype, \"state\", {\r\n        get: function () {\r\n            return this._state;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(App.prototype, \"moduleMap\", {\r\n        get: function () {\r\n            return this._moduleMap;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    App.prototype.bootstrap = function (bootLoaders) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var bootPromises, _loop_1, i, e_1;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        this.setState(App.BOOTING);\r\n                        if (!bootLoaders || bootLoaders.length <= 0) {\r\n                            this.setState(App.BOOTEND);\r\n                            return [2, true];\r\n                        }\r\n                        if (!(bootLoaders && bootLoaders.length > 0)) return [3, 4];\r\n                        bootPromises = [];\r\n                        _loop_1 = function (i) {\r\n                            var bootLoader = bootLoaders[i];\r\n                            bootPromises.push(new Promise(function (res, rej) {\r\n                                bootLoader.onBoot(_this, function (isOk) {\r\n                                    if (isOk) {\r\n                                        res();\r\n                                    }\r\n                                    else {\r\n                                        rej();\r\n                                    }\r\n                                });\r\n                            }));\r\n                        };\r\n                        for (i = 0; i < bootLoaders.length; i++) {\r\n                            _loop_1(i);\r\n                        }\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 3, , 4]);\r\n                        return [4, Promise.all(bootPromises)];\r\n                    case 2:\r\n                        _a.sent();\r\n                        this.setState(App.BOOTEND);\r\n                        return [2, true];\r\n                    case 3:\r\n                        e_1 = _a.sent();\r\n                        console.error(e_1);\r\n                        this.setState(App.BOOTEND);\r\n                        return [2, false];\r\n                    case 4: return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    App.prototype.init = function () {\r\n        var moduleMap = this._moduleMap;\r\n        var moduleIns;\r\n        if (this.state === App.RUNING)\r\n            return;\r\n        for (var key in moduleMap) {\r\n            moduleIns = moduleMap[key];\r\n            moduleIns.onInit && moduleIns.onInit(this);\r\n        }\r\n        for (var key in moduleMap) {\r\n            moduleIns = moduleMap[key];\r\n            moduleIns.onAfterInit && moduleIns.onAfterInit(this);\r\n        }\r\n        this.setState(App.RUNING);\r\n    };\r\n    App.prototype.loadModule = function (moduleIns, key) {\r\n        if (this._state === App.STOP)\r\n            return false;\r\n        var res = false;\r\n        if (!key) {\r\n            key = moduleIns.key;\r\n        }\r\n        if (key && typeof key === \"string\") {\r\n            if (moduleIns) {\r\n                if (!this._moduleMap[key]) {\r\n                    this._moduleMap[key] = moduleIns;\r\n                    res = true;\r\n                    if (this._state === App.RUNING) {\r\n                        moduleIns.onInit && moduleIns.onInit(this);\r\n                        moduleIns.onAfterInit && moduleIns.onAfterInit();\r\n                    }\r\n                }\r\n                else {\r\n                    this._log(\"\\u52A0\\u8F7D\\u6A21\\u5757:\\u6A21\\u5757:\" + key + \"\\u5DF2\\u7ECF\\u5B58\\u5728,\\u4E0D\\u91CD\\u590D\\u52A0\\u8F7D\");\r\n                }\r\n            }\r\n            else {\r\n                this._log(\"\\u52A0\\u8F7D\\u6A21\\u5757:\\u6A21\\u5757:\" + key + \"\\u5B9E\\u4F8B\\u4E3A\\u7A7A\");\r\n            }\r\n        }\r\n        else {\r\n            this._log(\"\\u52A0\\u8F7D\\u6A21\\u5757:\\u6A21\\u5757key\\u4E3A\\u7A7A\");\r\n        }\r\n        return res;\r\n    };\r\n    App.prototype.hasModule = function (moduleKey) {\r\n        return !!this._moduleMap[moduleKey];\r\n    };\r\n    App.prototype.stop = function () {\r\n        var moduleMap = this._moduleMap;\r\n        var moduleIns;\r\n        this.setState(App.STOP);\r\n        for (var key in moduleMap) {\r\n            moduleIns = moduleMap[key];\r\n            moduleIns.onStop && moduleIns.onStop();\r\n        }\r\n    };\r\n    App.prototype.getModule = function (moduleKey) {\r\n        return this._moduleMap[moduleKey];\r\n    };\r\n    App.prototype.setState = function (state) {\r\n        if (!isNaN(this._state)) {\r\n            if (this._state >= state)\r\n                return;\r\n        }\r\n        this._state = state;\r\n    };\r\n    App.prototype._log = function (msg, level) {\r\n        switch (level) {\r\n            case 1:\r\n                console.warn(\"\\u3010\\u4E3B\\u7A0B\\u5E8F\\u3011\" + msg);\r\n                break;\r\n            case 2:\r\n                console.error(\"\\u3010\\u4E3B\\u7A0B\\u5E8F\\u3011\" + msg);\r\n                break;\r\n            default:\r\n                console.warn(\"\\u3010\\u4E3B\\u7A0B\\u5E8F\\u3011\" + msg);\r\n                break;\r\n        }\r\n    };\r\n    App.UN_RUN = 0;\r\n    App.BOOTING = 1;\r\n    App.BOOTEND = 2;\r\n    App.RUNING = 3;\r\n    App.STOP = 4;\r\n    return App;\r\n}());\n\nexport { App };\n\n    \n//# sourceMappingURL=index.mjs.map\n","import { App } from \"@ailhc/egf-core\";\n\nexport class RefOtherPkg extends App {\n    constructor() {\n        super();\n        const a = new App();\n        console.log(a);\n    }\n}\n"],"names":["classA","a","classB","b","console","log","classC","cc","__generator","thisArg","body","f","y","t","g","_","label","sent","trys","ops","next","verb","throw","return","Symbol","iterator","this","n","v","op","TypeError","call","done","value","pop","length","push","e","step","App","_state","_moduleMap","Object","defineProperty","prototype","get","enumerable","configurable","bootstrap","bootLoaders","_arguments","generator","bootPromises","_loop_1","i","e_1","_this","_a","setState","BOOTING","BOOTEND","bootLoader","Promise","res","rej","onBoot","isOk","all","error","P","resolve","reject","fulfilled","rejected","result","then","apply","init","moduleIns","moduleMap","state","RUNING","key","onInit","onAfterInit","loadModule","STOP","_log","hasModule","moduleKey","stop","onStop","getModule","isNaN","msg","level","warn","UN_RUN","_super","__extends"],"mappings":"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"}