window.__require=function t(e,o,n){function r(s,a,c){if(!o[s]){if(!e[s]){var p=s;if(s.includes("./")&&(p=(p=s.split("/"))[p.length-1]),!e[p]){var l="function"==typeof __require&&__require;if(!a&&l)return l(p,!0);if(i)return i(p,!0);throw new Error("Cannot find module '"+s+"'")}s=p}var u=o[s]={exports:{}};e[s][0].call(u.exports,function(t){return r(e[s][1][t]||t,void 0,t.includes("./")?void 0:t)},u,u.exports,t,e,o,n)}return c&&o[s]&&!o[c]&&(o[c]=o[s]),o[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){this.keys=new Proxy({},{get:function(t,e){return e}}),this._valueMap={},this._unuseHandlers=[]}return t.prototype.on=function(t,e,o,n,r){if("string"==typeof t){if(!e)return;this._addHandler(this._getHandler(t,e,o,n,r))}else if(this._isArr(t))for(var i=t,s=0;s<i.length;s++)this._addHandler(i[s]);else this._addHandler(t)},t.prototype.has=function(t){return this._handlerMap&&!!this._handlerMap[t]},t.prototype.offAllByContext=function(t){var e=this._handlerMap;if(t&&e)for(var o in e)e[o]&&this.off(o,null,t)},t.prototype.offAll=function(t){if(!this._isStringNull(t)){var e=this._handlerMap,o=this._stickHandlersMap,n=this._valueMap;if(o&&(o[t]=void 0),e){var r=e[t];if(this._isArr(r))for(var i=0;i<r.length;i++)this._recoverHandler(r[i]);else this._recoverHandler(r);e[t]=void 0}n&&(n[t]=void 0)}},t.prototype.off=function(t,e,o,n){if(!this._isStringNull(t)){var r=this._handlerMap;if(!r||!r[t])return this;var i=r[t];if(void 0!==i&&null!==i){var s=void 0;if(this._isArr(i)){for(var a=(s=i).length-1,c=a;c>=0;c--)!(i=s[c])||o&&i.context!==o||null!=e&&i.listener!==e||n&&!i.once||(c!==(a=s.length-1)&&(i=s[a],s[a]=s[c],s[c]=i),this._recoverHandler(s.pop()));s.length||(r[t]=void 0)}else o&&i.context!==o||null!=e&&i.listener!==e||n&&!i.once||(this._recoverHandler(i),r[t]=void 0)}return this}},t.prototype.broadcast=function(e,o,n,r){var i=this._handlerMap;if(i){var s=i[e];if(r){var a=this._valueMap;a||(a={},this._valueMap=a),a[e]=o}if(s)if(this._isArr(s)){for(var c=s,p=(u=void 0,c.length-1),l=p;l>=0;l--)u=c[l],o?t._runHandlerWithData(u,o,n):t._runHandler(u,n),u.once&&(u=c[p=c.length-1],c[p]=c[l],c[l]=u,this._recoverHandler(c.pop()));c.length||(this._handlerMap[e]=void 0)}else{var u=s;o?t._runHandlerWithData(u,o,n):t._runHandler(u,n),u.once&&(this._recoverHandler(u),this._handlerMap[e]=void 0)}}},t.prototype.stickyBroadcast=function(t,e,o,n){if(!this._isStringNull(t)){var r=this._handlerMap;if(r&&r[t])this.broadcast(t,e,o,n);else{var i=this._stickHandlersMap;i||(i={},this._stickHandlersMap=i);var s=i[t],a={key:t,value:e,callback:o,persistence:n};s?s.push(a):i[t]=[a]}}},t.prototype._isStringNull=function(t){return!t||""===t.trim()},t.prototype._isArr=function(t){return"[object Array]"===Object.prototype.toString.call(t)},t._runHandlerWithData=function(t,e,o){if(null==t.listener)return null;var n;if(null==e){var r=t.args?t.args.unshift(o):[o];n=t.listener.apply(t.context,r)}else n=(t.args||e.unshift)&&t.args?t.listener.apply(t.context,[e,o].concat(t.args)):t.listener.apply(t.context,[e,o]);return n},t._runHandler=function(t,e){if(null==t.listener)return null;var o=t.args?t.args.unshift(e):[e];return t.listener.apply(t.context,o)},t.prototype._recoverHandler=function(t){t.args=void 0,t.context=void 0,t.listener=void 0,t.key=void 0,this._unuseHandlers.push(t)},t.prototype._getHandler=function(t,e,o,n,r){var i,s=this._unuseHandlers;return(i=s.length?s.pop():{}).key=t,i.listener=e,i.context=o,i.once=n,i.args=r,i},t.prototype._addHandler=function(t){var e=this._handlerMap;t.once&&this.off(t.key,t.listener,t.context,t.once),e||(e={},this._handlerMap=e);var o=e[t.key];o?this._isArr(o)?o.push(t):e[t.key]=[o,t]:e[t.key]=t;var n=this._stickHandlersMap;if(n){var r=n[t.key];if(r){for(var i,s=0;s<r.length;s++)i=r[s],this.broadcast(i.key,i.value,i.callback,i.persistence);n[i.key]=void 0}}t.key!==this.keys.onListenerOn&&this.broadcast(this.keys.onListenerOn,t.key)},t.prototype.value=function(t){return this._valueMap&&this._valueMap[t]},t.prototype.dispose=function(){this._handlerMap=void 0,this._stickHandlersMap=void 0,this._valueMap=void 0},t}();o.Broadcast=n},{}],2:[function(t,e,o){"use strict";function n(t,e,o,n){return new(o||(o=Promise))(function(r,i){function s(t){try{c(n.next(t))}catch(t){i(t)}}function a(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){t.done?r(t.value):new o(function(e){e(t.value)}).then(s,a)}c((n=n.apply(t,e||[])).next())})}function r(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}}Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(){this._state=0,this._moduleMap={}}return Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"moduleMap",{get:function(){return this._moduleMap},enumerable:!1,configurable:!0}),t.prototype.bootstrap=function(e){return n(this,void 0,void 0,function(){var o,n,i,s,a=this;return r(this,function(r){switch(r.label){case 0:if(this.setState(t.BOOTING),!e||e.length<=0)return this.setState(t.BOOTEND),[2,!0];if(!(e&&e.length>0))return[3,4];for(o=[],n=function(t){var n=e[t];o.push(new Promise(function(t,e){n.onBoot(a,function(o){o?t():e()})}))},i=0;i<e.length;i++)n(i);r.label=1;case 1:return r.trys.push([1,3,,4]),[4,Promise.all(o)];case 2:return r.sent(),this.setState(t.BOOTEND),[2,!0];case 3:return s=r.sent(),console.error(s),this.setState(t.BOOTEND),[2,!1];case 4:return[2]}})})},t.prototype.init=function(){var e,o=this._moduleMap;if(this.state!==t.RUNING){for(var n in o)(e=o[n]).onInit&&e.onInit(this);for(var n in o)(e=o[n]).onAfterInit&&e.onAfterInit(this);this.setState(t.RUNING)}},t.prototype.loadModule=function(e,o){if(this._state===t.STOP)return!1;var n=!1;return o||(o=e.key),o&&"string"==typeof o?e?this._moduleMap[o]?this._log("\u52a0\u8f7d\u6a21\u5757:\u6a21\u5757:"+o+"\u5df2\u7ecf\u5b58\u5728,\u4e0d\u91cd\u590d\u52a0\u8f7d"):(this._moduleMap[o]=e,n=!0,this._state===t.RUNING&&(e.onInit&&e.onInit(this),e.onAfterInit&&e.onAfterInit())):this._log("\u52a0\u8f7d\u6a21\u5757:\u6a21\u5757:"+o+"\u5b9e\u4f8b\u4e3a\u7a7a"):this._log("\u52a0\u8f7d\u6a21\u5757:\u6a21\u5757key\u4e3a\u7a7a"),n},t.prototype.hasModule=function(t){return!!this._moduleMap[t]},t.prototype.stop=function(){var e,o=this._moduleMap;for(var n in this.setState(t.STOP),o)(e=o[n]).onStop&&e.onStop()},t.prototype.getModule=function(t){return this._moduleMap[t]},t.prototype.setState=function(t){!isNaN(this._state)&&this._state>=t||(this._state=t)},t.prototype._log=function(t,e){switch(e){case 1:console.warn("\u3010\u4e3b\u7a0b\u5e8f\u3011"+t);break;case 2:console.error("\u3010\u4e3b\u7a0b\u5e8f\u3011"+t);break;default:console.warn("\u3010\u4e3b\u7a0b\u5e8f\u3011"+t)}},t.UN_RUN=0,t.BOOTING=1,t.BOOTEND=2,t.RUNING=3,t.STOP=4,t}();o.App=i},{}],3:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){this.keys=new Proxy({},{get:function(t,e){return e}}),this._sigCtrlCache={},this._sigCtrlShowCfgMap={},this._ctrlClassMap={}}return Object.defineProperty(t.prototype,"sigCtrlCache",{get:function(){return this._sigCtrlCache},enumerable:!1,configurable:!0}),t.prototype.getCtrlClass=function(t){return this._ctrlClassMap[t]},t.prototype.init=function(t){this._resHandler||(this._resHandler=t)},t.prototype.registTypes=function(t){if(t)if("number"==typeof t.length&&t.length)for(var e=0;e<t.length;e++)this.regist(t[e]);else for(var o in t)this.regist(t[o],o)},t.prototype.regist=function(t,e){var o=this._ctrlClassMap;if(!t.typeKey){if(!e)return void console.error("typeKey is null");t.typeKey=e}o[t.typeKey]?console.error("type:"+t.typeKey+" is exit"):o[t.typeKey]=t},t.prototype.isRegisted=function(t){return!!this._ctrlClassMap[t]},t.prototype.getDpcRessInClass=function(t){var e=this._ctrlClassMap[t];return e?e.ress:void console.error("This class :"+t+" is not registered ")},t.prototype.getSigDpcRess=function(t){var e=this.getSigDpcIns(t);return e?e.getRess():null},t.prototype.loadSigDpc=function(t,e){var o=this.getSigDpcIns(t);return o&&this.loadDpcByIns(o,e),o},t.prototype.getSigDpcIns=function(t){var e=this._sigCtrlCache;if(!t)return null;var o=e[t];return o||(o=o||this.insDpc(t))&&(e[t]=o),o},t.prototype.initSigDpc=function(t,e){var o;return o=this.getSigDpcIns(t),this.initDpcByIns(o,e),o},t.prototype.showDpc=function(t,e,o,n,r,i,s,a,c){var p,l=this;if("string"==typeof t)p={typeKey:t,onShowData:e,showedCb:o,onInitData:n,forceLoad:r,onLoadData:i,showEndCb:a,loadCb:s,onCancel:c};else{if("object"!=typeof t)return void console.warn("unknown showDpc",t);p=t,void 0!==e&&(p.onShowData=e),void 0!==o&&(p.showedCb=o),void 0!==a&&(p.showEndCb=a),void 0!==n&&(p.onInitData=n),void 0!==r&&(p.forceLoad=r),void 0!==i&&(p.onLoadData=i),void 0!==s&&(p.loadCb=s),void 0!==c&&(p.onCancel=c)}var u=this.getSigDpcIns(p.typeKey);if(!u)return console.error("There is no registration :typeKey:"+p.typeKey),null;u.needShow=!0;var d=this._sigCtrlShowCfgMap,h=d[p.typeKey];if(h&&p?(h.onCancel&&h.onCancel(),Object.assign(h,p)):d[p.typeKey]=p,u.needLoad||p.forceLoad?(u.isLoaded=!1,u.needLoad=!0):u.isLoaded||u.isLoading||(u.needLoad=!0),u.needLoad){var f=p,y=f.loadCb;f.loadCb=function(t){if(y&&y(t),t){var e=d[p.typeKey];t.needShow&&(l.initDpcByIns(t,e),l.showDpcByIns(t,e),t.needShow=!1)}delete d[p.typeKey]},u.needLoad=!1,this._loadRess(u,f)}else u.isInited||this.initDpcByIns(u,p.onInitData),u.isInited&&(this.showDpcByIns(u,p),u.needShow=!1);return u},t.prototype.updateDpc=function(t,e){if(t){var o=this._sigCtrlCache[t];o&&o.isInited?o.onUpdate(e):console.warn(" updateDpc key:"+t+", The instance is not initialized")}else console.warn("!!!key is null")},t.prototype.hideDpc=function(t){if(t){var e=this._sigCtrlCache[t];e?this.hideDpcByIns(e):console.warn(t+" Not instantiate")}else console.warn("!!!key is null")},t.prototype.destroyDpc=function(t,e){if(t&&""!==t){var o=this._sigCtrlCache[t];this.destroyDpcByIns(o,e),delete this._sigCtrlCache[t]}else console.warn("!!!key is null")},t.prototype.isLoading=function(t){if(t){var e=this._sigCtrlCache[t];return!!e&&e.isLoading}console.warn("!!!key is null")},t.prototype.isLoaded=function(t){if(t){var e=this._sigCtrlCache[t];return!!e&&e.isLoaded}console.warn("!!!key is null")},t.prototype.isInited=function(t){if(t){var e=this._sigCtrlCache[t];return!!e&&e.isInited}console.warn("!!!key is null")},t.prototype.isShowed=function(t){if(!t)return console.warn("!!!key is null"),!1;var e=this._sigCtrlCache[t];return!!e&&e.isShowed},t.prototype.insDpc=function(t){var e=this._ctrlClassMap[t];if(!e)return console.error("Not instantiate:"+t),null;var o=new e;return o.key=t,o},t.prototype.loadDpcByIns=function(t,e){t&&(t.needLoad||e&&e.forceLoad?(t.isLoaded=!1,t.needLoad=!0):t.isLoaded||t.isLoading||(t.needLoad=!0),t.needLoad&&(t.needLoad=!1,this._loadRess(t,e)))},t.prototype.initDpcByIns=function(t,e){t&&(t.isInited||(t.isInited=!0,t.onInit&&t.onInit(e)))},t.prototype.showDpcByIns=function(t,e){t.onShow&&t.onShow(e),t.isShowed=!0,e.showedCb&&e.showedCb(t)},t.prototype.hideDpcByIns=function(t){t&&(t.needShow=!1,t.onHide&&t.onHide(),t.isShowed=!1)},t.prototype.destroyDpcByIns=function(t,e){if(t&&(t.isInited&&(t.isLoaded=!1,t.isInited=!1,t.needShow=!1),t.isShowed&&this.hideDpcByIns(t),t.onDestroy&&t.onDestroy(e),e)){var o=t;o.releaseRes?o.releaseRes(t):this._resHandler&&this._resHandler.releaseRes&&this._resHandler.releaseRes(t)}},t.prototype._loadRess=function(t,e){if(t)if(t.isLoaded)t.isLoaded=!0,t.isLoading=!1,e&&(null===e||void 0===e||e.loadCb(t));else{var o=e||{};isNaN(o.loadCount)&&(o.loadCount=0),o.loadCount++;var n=function(){o.loadCount--,0===o.loadCount&&(t.isLoaded=!0,t.isLoading=!1,e&&(null===e||void 0===e||e.loadCb(t)))},r=function(){o.loadCount--,0===o.loadCount&&(t.isLoaded=!1,t.isLoading=!1,e&&(null===e||void 0===e||e.loadCb(null)))},i=t;t.isLoading=!0,t.isLoaded=!1;var s=e&&e.onLoadData;if(s=t.onLoadData?Object.assign(t.onLoadData,s):s,i.loadRes)i.loadRes({key:t.key,complete:n,error:r,onLoadData:s});else if(this._resHandler){var a=t.getRess?t.getRess():null;if(!a||!a.length)return void n();this._resHandler.loadRes({key:t.key,ress:a,complete:n,error:r,onLoadData:s})}else t.isLoaded=!1,t.isLoading=!1,r(),console.error("load fail:"+t.key)}},t}();o.DpcMgr=n},{}],4:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(t){this._mgr=t}return t.prototype.onInit=function(t){},t.prototype.onShow=function(t){this.node&&(this.node.active=!0)},t.prototype.getRess=function(){},t.prototype.getNode=function(){return this.node},t.prototype.onUpdate=function(t){},t.prototype.getFace=function(){return this},t.prototype.onDestroy=function(t){this.node&&this.node.destroy()},t.prototype.onHide=function(){this.node&&(this.node.active=!1)},t.prototype.forceHide=function(){this.node&&(this.node.active=!1),this.isShowed=!1},t.prototype.onResize=function(){},t}(),r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)};function i(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onInit=function(t,e,o){this._layerType=e,this.name=t,this._layerMgr=o},e.prototype.onDestroy=function(){},Object.defineProperty(e.prototype,"layerType",{get:function(){return this._layerType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layerName",{get:function(){return this.name},enumerable:!1,configurable:!0}),e.prototype.onAdd=function(t){t.addChild(this),this.width=t.width,this.height=t.height},e.prototype.onHide=function(){this.active=!1},e.prototype.onShow=function(){this.active=!0},e.prototype.onSpAdd=function(t){this.addChild(t)},e.prototype.onNodeAdd=function(t){t.parent&&t.parent===this||this.addChild(t)},e}(cc.Node);o.Layer=s,o.NodeCtrl=n},{}],5:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.init=function(t,e,o,n){n&&(this._root=n),this.layerEnum=t,this.defaultType=e,this.classMap=o;for(var r,i,s,a,c=Object.keys(t).length/2,p=0;p<c;p++)a=(r=t[p].split("_"))[0],(i=r[1])||(i=a),(s=new(o&&this.classMap.has(a)?this.classMap.get(a):e)).onInit(i,p,this),this.addLayer(s)},t.prototype.setLayerRoot=function(t){t&&(this._root=t,this._layerMap&&this._layerMap.forEach(function(e){e.onAdd(t)}))},Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layerMap",{get:function(){return this._layerMap},enumerable:!1,configurable:!0}),t.prototype.addLayer=function(t){this._layerMap||(this._layerMap=new Map);var e=t.layerType;return this._layerMap.has(e)?(console.warn("\u3010\u5c42\u7ea7\u7ba1\u7406\u5668\u3011\u91cd\u590d\u6dfb\u52a0\u5c42\u7ea7 type:"+e+",name:"+t.layerName),!1):(this._layerMap.set(e,t),this._root&&t.onAdd(this._root),!0)},t.prototype.removeLayer=function(t){if(!this._layerMap||!this._layerMap.has(t))return!1;var e=this._layerMap.get(t);return e.onDestroy&&e.onDestroy(),this._layerMap.delete(t),!0},t.prototype.hideLayer=function(t){var e=this.getLayerByType(t);e&&e.onHide()},t.prototype.showLayer=function(t){var e=this.getLayerByType(t);e&&e.onShow()},t.prototype.addNodeToLayer=function(t,e){var o=this.getLayerByType(e);o&&o.onNodeAdd(t)},t.prototype.getLayerByType=function(t){var e=this._layerMap.get(t);return e||console.warn("\u3010\u5c42\u7ea7\u7ba1\u7406\u5668\u3011\u6ca1\u6709\u8fd9\u4e2a\u5c42\u7ea7:"+this.layerEnum[t]+","+t),e},t}();o.LayerMgr=n},{}],6:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return Object.defineProperty(t.prototype,"poolObjs",{get:function(){return this._poolObjs},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sign",{get:function(){return this._sign},enumerable:!1,configurable:!0}),t.prototype.setObjHandler=function(t){t&&(t.pool=this,this._objHandler=t)},Object.defineProperty(t.prototype,"size",{get:function(){var t=this._poolObjs;return t?t.length:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"usedCount",{get:function(){return this._usedObjMap?this._usedObjMap.size:0},enumerable:!1,configurable:!0}),t.prototype.init=function(t){if(this._sign)this._loghasInit();else{if(!t.sign)return void console.log("[objPool] sign is undefind");if(!t.createFunc&&!t.clas)return void console.error("[objPool] sign:"+t.sign+"  no createFunc and class");this._sign=t.sign,this._poolObjs=[],this._usedObjMap=new Map,this.threshold=t.threshold;var e=t.clas;t.createFunc?this._createFunc=t.createFunc:t.clas&&(this._createFunc=function(){return new e}),this._objHandler=t.objHandler}return this},t.prototype.initByFunc=function(t,e){return this._sign?this._loghasInit():(this._sign=t,this._poolObjs=[],this._usedObjMap=new Map,this._createFunc=e),this},t.prototype.initByClass=function(t,e){return this._sign?this._loghasInit():(this._sign=t,this._poolObjs=[],this._usedObjMap=new Map,this._createFunc=function(){return new e}),this},t.prototype.preCreate=function(t){if(this._sign)for(var e,o=this._poolObjs,n=this._objHandler,r=0;r<t;r++)(e=this._createFunc())&&e.onCreate?e.onCreate(this):n&&n.onCreate&&n.onCreate(e),e.poolSign=this._sign,e.isInPool=!0,e.pool=this,o.push(e);else this._logNotInit()},t.prototype.clear=function(){var t=this.poolObjs;if(t){for(var e=void 0,o=0;o<t.length;o++)e=t[o],this.kill(e);t.length=0}},t.prototype.kill=function(t){if(this._usedObjMap.has(t)){var e=this._objHandler;t.onFree||t.onReturn?(t.onFree&&t.onFree(),t.onReturn&&t.onReturn()):e&&(e.onFree||e.onReturn)&&(e.onFree&&e.onFree(t),e.onReturn&&e.onReturn(t)),this._usedObjMap.delete(t)}var o=this._objHandler;t&&t.onKill?t.onKill():o&&o.onKill&&o.onKill(t),t.isInPool=!1,t.pool&&(t.pool=void 0)},t.prototype.free=function(t){this.return(t)},t.prototype.return=function(t){if(this._sign)if(t.isInPool)console.warn("pool :"+this._sign+" obj is in pool");else{var e=this._objHandler;if(this.threshold&&this.size>=this.threshold)return void this.kill(t);t.onFree||t.onReturn?(t.onFree&&t.onFree(),t.onReturn&&t.onReturn()):e&&(e.onFree||e.onReturn)&&(e.onFree&&e.onFree(t),e.onReturn&&e.onReturn(t)),t.isInPool=!0,this._poolObjs.push(t),this._usedObjMap.delete(t)}else this._logNotInit()},t.prototype.returnAll=function(){var t=this;this._usedObjMap.forEach(function(e){t.free(e)}),this._usedObjMap.clear()},t.prototype.freeAll=function(){this.returnAll()},t.prototype.get=function(t){if(this._sign){var e;this.poolObjs.length?e=this._poolObjs.pop():((e=this._createFunc()).onCreate&&e.onCreate(this),e.poolSign=this._sign),this._usedObjMap.set(e,e),e.isInPool=!1;var o=this._objHandler;return e.onGet?e.onGet(t):o&&o.onGet&&o.onGet(e,t),e}this._logNotInit()},t.prototype.getMore=function(t,e){void 0===e&&(e=1);var o=[];if(!isNaN(e)&&e>1)for(var n=0;n<e;n++)o.push(this.get(t));else o.push(this.get(t));return o},t.prototype._loghasInit=function(){console.warn("objpool "+this._sign+" already inited")},t.prototype._logNotInit=function(){console.error("objpool is not init")},t}(),r="objPool is null",i="objPool is exit",s="sign is null",a=function(){function t(){this._poolDic={}}return t.prototype.setPoolThreshold=function(t,e){var o=this._poolDic[t];o?o.threshold=e:this._log(r+":"+t)},t.prototype.setPoolHandler=function(t,e){var o=this._poolDic[t];o?o.setObjHandler(e):this._log(r)},t.prototype.createObjPool=function(t){var e=t.sign;if(this.hasPool(e))this._log(""+i+e);else{if(e&&""!==e.trim()){var o=new n;return(o=o.init(t))&&(this._poolDic[e]=o),o}this._log(""+s)}},t.prototype.createByClass=function(t,e){if(this.hasPool(t))this._log(""+i+t);else if(t&&""!==t.trim()){var o=new n;o.initByClass(t,e),this._poolDic[t]=o}else this._log(""+s)},t.prototype.createByFunc=function(t,e){if(this.hasPool(t))this._log(""+i+t);else if(t&&""!==t.trim()){var o=new n;o.initByFunc(t,e),this._poolDic[t]=o}else this._log(""+s)},t.prototype.hasPool=function(t){return!!this._poolDic[t]},t.prototype.getPool=function(t){return this._poolDic[t]},t.prototype.clearPool=function(t){var e=this._poolDic[t];e&&e.clear()},t.prototype.destroyPool=function(t){var e=this._poolDic,o=e[t];o?(o.clear(),e[t]=void 0):this._log(""+r+t)},t.prototype.preCreate=function(t,e){var o=this._poolDic[t];o?o.preCreate(e):this._log(""+r+t)},t.prototype.get=function(t,e){var o=this._poolDic[t];return o?o.get(e):void 0},t.prototype.getMore=function(t,e,o){var n=this._poolDic[t];return n?n.getMore(e,o):void 0},t.prototype.getPoolObjsBySign=function(t){var e=this._poolDic[t];return e?e.poolObjs:void 0},t.prototype.free=function(t){this.return(t)},t.prototype.return=function(t){var e=this._poolDic[t.poolSign];e&&e.free(t)},t.prototype.freeAll=function(t){this.returnAll(t)},t.prototype.returnAll=function(t){var e=this._poolDic[t];e&&e.returnAll()},t.prototype.kill=function(t){var e=this._poolDic[t.poolSign];e&&e.kill(t)},t.prototype._log=function(t,e){void 0===e&&(e=1);var o="[objPool.ObjPoolMgr]";switch(e){case 0:console.log(o+t);break;case 1:console.warn(o+t);case 2:console.error(o+t);default:console.log(o+t)}},t}();o.BaseObjPool=n,o.ObjPoolMgr=a},{}],AnimView:[function(t,e,o){"use strict";cc._RF.push(e,"73e18olCmBNypbOLs6S1T+8","AnimView");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0}),o.AnimView=void 0;var r=t("@ailhc/dpctrl-ccc"),i=t("../../../src/Utils"),s=t("../DpcTestLayerType"),a=t("../setDpcTestModuleMap"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isAsyncShow=!0,e}return n(e,t),e.prototype.getRess=function(){return e._ress||(e._ress=[{path:e.prefabUrl,type:cc.Prefab}]),e._ress},e.prototype.onInit=function(){t.prototype.onInit.call(this),this.node=i.getPrefabNodeByPath(e.prefabUrl),this._animComp=this.node.getComponent(cc.Animation)},e.prototype.onShow=function(e){t.prototype.onShow.call(this),a.dtM.layerMgr.addNodeToLayer(this.node,s.DpcTestLayerType.POP_UP_UI),this._animComp.play("asyncViewShowAnimClip",0),this._animComp.once(cc.Animation.EventType.FINISHED,function(){console.log("\u64ad\u653e\u5b8c\u6210"),e.showEndCb&&e.showEndCb()})},e.prototype.onHide=function(){this._animComp&&this._animComp.stop(),t.prototype.onHide.call(this)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this)},e.typeKey="AnimView",e.prefabUrl="display-ctrl-test-views/AnimView",e}(r.NodeCtrl);o.AnimView=c,cc._RF.pop()},{"../../../src/Utils":"Utils","../DpcTestLayerType":"DpcTestLayerType","../setDpcTestModuleMap":"setDpcTestModuleMap","@ailhc/dpctrl-ccc":4}],AppMainComp:[function(t,e,o){"use strict";cc._RF.push(e,"4c4051ZIRZDkK10qDq8vPKt","AppMainComp");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},i=this&&this.__awaiter||function(t,e,o,n){function r(t){return t instanceof o?t:new o(function(e){e(t)})}return new(o||(o=Promise))(function(o,i){function s(t){try{c(n.next(t))}catch(t){i(t)}}function a(t){try{c(n.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):r(t.value).then(s,a)}c((n=n.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var o,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(t){return function(e){return c([t,e])}}function c(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,p=(a.property,t("@ailhc/egf-core")),l=t("./FrameworkLoader"),u=t("./ModuleMap"),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){this.bootFramework()},e.prototype.bootFramework=function(){return i(this,void 0,void 0,function(){var t;return s(this,function(e){switch(e.label){case 0:return[4,(t=new p.App).bootstrap([new l.FrameworkLoader])];case 1:return e.sent(),u.setModuleMap(t.moduleMap),t.init(),window.m=u.m,[2]}})})},e=r([c],e)}(cc.Component);o.default=d,cc._RF.pop()},{"./FrameworkLoader":"FrameworkLoader","./ModuleMap":"ModuleMap","@ailhc/egf-core":2}],CustomResHandleView:[function(t,e,o){"use strict";cc._RF.push(e,"cd94auCISJCcrse4R2wBmvJ","CustomResHandleView");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0}),o.CustomResHandleView=void 0;var r=t("@ailhc/dpctrl-ccc"),i=t("../../../src/Utils"),s=t("../DpcTestLayerType"),a=t("../setDpcTestModuleMap"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.loadRes=function(t){var o=this;a.dtM.uiMgr.showDpc({typeKey:a.dtM.uiMgr.keys.LoadingView,showedCb:function(){var n=i.getSomeRandomInt(0,e._monsterNames.length-1,2),r=[];o._monsterIconRess=r,n.forEach(function(t){r.push({path:e._monsterIconDir+"/"+e._monsterNames[t],type:cc.SpriteFrame})}),r.push({path:e.prefabUrl,type:cc.Prefab}),r.push({path:"test-txts/txt1",type:cc.TextAsset}),cc.assetManager.loadAny(r,{bundle:"resources"},function(t,e,o){a.dtM.uiMgr.updateDpc(a.dtM.uiMgr.keys.LoadingView,{finished:t,total:e})},function(e,o){e?t.error():t.complete(),a.dtM.uiMgr.hideDpc("LoadingView")})}})},e.prototype.releaseRes=function(){cc.assetManager.releaseAsset(cc.resources.get(e.prefabUrl))},e.prototype.onInit=function(){t.prototype.onInit.call(this),this.node=i.getPrefabNodeByPath(e.prefabUrl)},e.prototype.onShow=function(e){t.prototype.onShow.call(this,e),a.dtM.layerMgr.addNodeToLayer(this.node,s.DpcTestLayerType.POP_UP_UI);var o=i.getChild(this.node,"monsterA"),n=i.getChild(this.node,"monsterB");i.getComp(o,cc.Sprite).spriteFrame=cc.resources.get(this._monsterIconRess[0].path,cc.SpriteFrame),i.getComp(n,cc.Sprite).spriteFrame=cc.resources.get(this._monsterIconRess[1].path,cc.SpriteFrame)},e.prototype.onHide=function(){t.prototype.onHide.call(this)},e.prototype.onDestroy=function(o){t.prototype.onDestroy.call(this),o&&cc.assetManager.releaseAsset(cc.resources.get(e.prefabUrl,cc.Prefab))},e.typeKey="CustomResHandleView",e._monsterNames=["BuleMonster","GreenMonster","PurpleMonster","RedMonster","YellowMonster"],e._monsterIconDir="monster_icon",e.prefabUrl="display-ctrl-test-views/CustomResHandleView",e}(r.NodeCtrl);o.CustomResHandleView=c,cc._RF.pop()},{"../../../src/Utils":"Utils","../DpcTestLayerType":"DpcTestLayerType","../setDpcTestModuleMap":"setDpcTestModuleMap","@ailhc/dpctrl-ccc":4}],DemoModule:[function(t,e,o){"use strict";cc._RF.push(e,"3d7d91muVVB9re74iV33Ean","DemoModule");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,a=i.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return n(e,t),e.prototype.start=function(){},r([a(cc.Label)],e.prototype,"label",void 0),r([a],e.prototype,"text",void 0),e=r([s],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],DepResView:[function(t,e,o){"use strict";cc._RF.push(e,"60f80lkiShNu7uopajFvRNs","DepResView");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0}),o.DepResView=void 0;var r=t("@ailhc/dpctrl-ccc"),i=t("../../../src/Utils"),s=t("../DpcTestLayerType"),a=t("../setDpcTestModuleMap"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onLoadData={showLoading:!0},e}return n(e,t),e.prototype.getRess=function(){return e._ress||(e._ress=[{path:e.prefabUrl,type:cc.Prefab},{path:"test-txts/txt1",type:cc.TextAsset}]),e._ress},e.prototype.onInit=function(){var o=this;t.prototype.onInit.call(this),this.node=i.getPrefabNodeByPath(e.prefabUrl),this.node.getChildByName("close-icon").on(cc.Node.EventType.MOUSE_DOWN,function(){a.dtM.uiMgr.hideDpc(o.key)})},e.prototype.onShow=function(e){t.prototype.onShow.call(this,e),a.dtM.layerMgr.addNodeToLayer(this.node,s.DpcTestLayerType.POP_UP_UI)},e.prototype.onHide=function(){t.prototype.onHide.call(this)},e.typeKey="DepResView",e.prefabUrl="display-ctrl-test-views/DepResView",e}(r.NodeCtrl);o.DepResView=c,cc._RF.pop()},{"../../../src/Utils":"Utils","../DpcTestLayerType":"DpcTestLayerType","../setDpcTestModuleMap":"setDpcTestModuleMap","@ailhc/dpctrl-ccc":4}],DpcTestLayerType:[function(t,e,o){"use strict";cc._RF.push(e,"2519bY6SwhJeL5nBTuZmL3u","DpcTestLayerType"),Object.defineProperty(o,"__esModule",{value:!0}),o.DpcTestLayerType=void 0,function(t){t[t.SCENE=0]="SCENE",t[t.UI=1]="UI",t[t.POP_UP_UI=2]="POP_UP_UI",t[t.EFFECT_UI=3]="EFFECT_UI",t[t.UNKNOW=4]="UNKNOW"}(o.DpcTestLayerType||(o.DpcTestLayerType={})),cc._RF.pop()},{}],DpcTestMainComp:[function(t,e,o){"use strict";cc._RF.push(e,"51a89QgGyRNc7k6nHHRxOz5","DpcTestMainComp");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var i=t("@ailhc/display-ctrl"),s=t("@ailhc/dpctrl-ccc"),a=t("@ailhc/egf-core"),c=t("@ailhc/layer"),p=t("../../src/Utils"),l=t("./DpcTestLayerType"),u=t("./setDpcTestModuleMap"),d=t("./view-ctrls/CustomResHandleView"),h=t("./view-ctrls/DepResView"),f=t("./view-ctrls/LoadingView"),y=t("@ailhc/obj-pool"),_=t("./view-ctrls/AnimView"),g=t("./view-ctrls/MutiInsView"),v=cc._decorator,b=v.ccclass,M=v.property;window.globalType={},window.globalType.NodeCtrlType=s.NodeCtrl;var w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.depResViewBtnsNode=void 0,e.ctrlBtns=void 0,e._mutiInss=[],e}return n(e,t),e.prototype.onLoad=function(){var t=new a.App;this._app=t;var e=new i.DpcMgr;e.init({loadRes:function(t){var e=t.onLoadData;(null===e||void 0===e?void 0:e.showLoading)&&u.dtM.uiMgr.showDpc("LoadingView"),cc.assetManager.loadAny(t.ress,{bundle:"resources"},function(o,n){console.log(t.key+"\u52a0\u8f7d\u4e2d:"+o+"/"+n),(null===e||void 0===e?void 0:e.showLoading)&&u.dtM.uiMgr.updateDpc("LoadingView",{finished:o,total:n})},function(o,n){o?(console.error("\u52a0\u8f7d\u5931\u8d25",o),t.error&&t.error()):t.complete&&t.complete(),(null===e||void 0===e?void 0:e.showLoading)&&u.dtM.uiMgr.hideDpc("LoadingView")})},releaseRes:function(t){var e,o=t.getRess();o&&o.length&&o.forEach(function(t){(e=cc.resources.get(t.path))&&cc.assetManager.releaseAsset(e)})}});var o=new c.LayerMgr,n=cc.director.getScene().getChildByName("Canvas");o.init(l.DpcTestLayerType,s.Layer,null,n),t.loadModule(o,"layerMgr"),t.loadModule(e,"uiMgr");var r=new y.ObjPoolMgr;t.loadModule(r,"poolMgr"),t.bootstrap(),t.init(),u.setDpcTestModuleMap(t.moduleMap),e.registTypes([f.LoadingView,_.AnimView,d.CustomResHandleView,h.DepResView,g.MutiInsView]);var v=p.getChild(this.depResViewBtnsNode,"depResStateTips");this._depResViewTipsLabel=p.getComp(v,cc.Label),this.ctrlBtns.zIndex=100,this.ctrlBtns.sortAllChildren(),u.dtM.uiMgr.loadSigDpc("LoadingView",{loadCb:function(){u.dtM.uiMgr.initSigDpc("LoadingView")}})},e.prototype.start=function(){},e.prototype.showDepResView=function(){u.dtM.uiMgr.showDpc(u.dtM.uiMgr.keys.DepResView)},e.prototype.hideDepResView=function(){u.dtM.uiMgr.hideDpc(u.dtM.uiMgr.keys.DepResView)},e.prototype.destroyDepResView=function(){u.dtM.uiMgr.destroyDpc(u.dtM.uiMgr.keys.DepResView,!0)},e.prototype.getDepResViewRess=function(){var t,e=null===(t=u.dtM.uiMgr.getSigDpcIns(u.dtM.uiMgr.keys.DepResView))||void 0===t?void 0:t.getRess();e&&(this._depResViewTipsLabel.string=e.map(function(t){return t.path}).toString())},e.prototype.preloadDepResViewRess=function(){u.dtM.uiMgr.loadSigDpc(u.dtM.uiMgr.keys.DepResView)},e.prototype.showAnimView=function(){u.dtM.uiMgr.showDpc({typeKey:u.dtM.uiMgr.keys.AnimView,showedCb:function(){console.log(u.dtM.uiMgr.keys.AnimView+":\u663e\u793a\u5b8c\u6210")},showEndCb:function(){console.log(u.dtM.uiMgr.keys.AnimView+":\u663e\u793a\u7ed3\u675f")}})},e.prototype.hideAnimView=function(){u.dtM.uiMgr.hideDpc(u.dtM.uiMgr.keys.AnimView)},e.prototype.showCustomResHandlerView=function(){u.dtM.uiMgr.showDpc(u.dtM.uiMgr.keys.CustomResHandleView)},e.prototype.hideCustomResHandlerView=function(){u.dtM.uiMgr.hideDpc(u.dtM.uiMgr.keys.CustomResHandleView)},e.prototype.destroyCustomResHandlerView=function(){u.dtM.uiMgr.destroyDpc(u.dtM.uiMgr.keys.CustomResHandleView,!0)},e.prototype.createMutiInsView=function(){var t=this;u.dtM.uiMgr.isLoaded(u.dtM.uiMgr.keys.MutiInsView)?this._createMutiInsView():u.dtM.uiMgr.loadSigDpc(u.dtM.uiMgr.keys.MutiInsView,{loadCb:function(e){t._createMutiInsView(e)}})},e.prototype._createMutiInsView=function(t){t||(t=u.dtM.uiMgr.insDpc(u.dtM.uiMgr.keys.MutiInsView)),u.dtM.uiMgr.initDpcByIns(t),u.dtM.uiMgr.showDpcByIns(t,{onShowData:{preStr:"egf",clickCount:p.getSomeRandomInt(0,100,1)[0]}}),this._mutiInss.push(t)},e.prototype.destroyAllMutiInsView=function(){for(var t=0;t<this._mutiInss.length;t++)u.dtM.uiMgr.destroyDpcByIns(this._mutiInss[t],!0);this._mutiInss.length=0,u.dtM.uiMgr.destroyDpc(u.dtM.uiMgr.keys.MutiInsView,!0)},e.prototype.loadABTest=function(){var t=this;u.dtM.uiMgr.showDpc("LoadingView"),u.dtM.uiMgr.updateDpc("LoadingView",{finished:0,total:1}),cc.assetManager.loadBundle("abtest",function(e,o){u.dtM.uiMgr.updateDpc("LoadingView",{finished:1,total:1}),t._app.loadModule(new window.globalType.ABTestModuleType,"abtest"),u.dtM.uiMgr.hideDpc("LoadingView")})},e.prototype.showAbTestView=function(){u.dtM.abtest?u.dtM.abtest.showABTestView():console.error("abtest\u6a21\u5757\u8fd8\u6ca1\u52a0\u8f7d")},e.prototype.destroyAbTestView=function(){u.dtM.uiMgr.destroyDpc("ABTestView",!0)},r([M(cc.Node)],e.prototype,"depResViewBtnsNode",void 0),r([M(cc.Node)],e.prototype,"ctrlBtns",void 0),e=r([b],e)}(cc.Component);o.default=w,cc._RF.pop()},{"../../src/Utils":"Utils","./DpcTestLayerType":"DpcTestLayerType","./setDpcTestModuleMap":"setDpcTestModuleMap","./view-ctrls/AnimView":"AnimView","./view-ctrls/CustomResHandleView":"CustomResHandleView","./view-ctrls/DepResView":"DepResView","./view-ctrls/LoadingView":"LoadingView","./view-ctrls/MutiInsView":"MutiInsView","@ailhc/display-ctrl":3,"@ailhc/dpctrl-ccc":4,"@ailhc/egf-core":2,"@ailhc/layer":5,"@ailhc/obj-pool":6}],FrameworkLoader:[function(t,e,o){"use strict";cc._RF.push(e,"ad209LADDpAsakca656zRuJ","FrameworkLoader"),Object.defineProperty(o,"__esModule",{value:!0}),o.FrameworkLoader=void 0;var n=function(){function t(){}return t.prototype.onBoot=function(t,e){e(!0)},t}();o.FrameworkLoader=n,cc._RF.pop()},{}],LayerType:[function(t,e,o){"use strict";cc._RF.push(e,"14d6a0lNuNMXrNJGAZS2Zq+","LayerType"),Object.defineProperty(o,"__esModule",{value:!0}),o.LayerType=void 0,function(t){t[t.SCENE=0]="SCENE",t[t.UI=1]="UI",t[t.POP_UP_UI=2]="POP_UP_UI",t[t.EFFECT_UI=3]="EFFECT_UI",t[t.UNKNOW=4]="UNKNOW"}(o.LayerType||(o.LayerType={})),cc._RF.pop()},{}],ListItem:[function(t,e,o){"use strict";cc._RF.push(e,"0e1d61ukkpPhKjtbymtUoxs","ListItem");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,a=i.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e}return n(e,t),e.prototype.start=function(){},e.prototype.init=function(t,e){this.label.string=t,this._clickCallBack=e},e.prototype.onClick=function(){this._clickCallBack()},r([a(cc.Label)],e.prototype,"label",void 0),e=r([s],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],LoadingView:[function(t,e,o){"use strict";cc._RF.push(e,"39f9b3Ix5BHoLhyDtrDe0+g","LoadingView");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0}),o.LoadingView=void 0;var r=t("@ailhc/dpctrl-ccc"),i=t("../../../src/Utils"),s=t("../DpcTestLayerType"),a=t("../setDpcTestModuleMap"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.getRess=function(){return e._ress||(e._ress=[{path:e.prefabUrl,type:cc.Prefab}]),e._ress},e.prototype.onInit=function(){t.prototype.onInit.call(this),this.node=i.getPrefabNodeByPath(e.prefabUrl),this._tipsLabel=this.node.getChildByName("loadingTips").getComponent(cc.Label)},e.prototype.onShow=function(e){t.prototype.onShow.call(this,e),a.dtM.layerMgr.addNodeToLayer(this.node,s.DpcTestLayerType.POP_UP_UI),this._tipsLabel.string="\u52a0\u8f7d\u4e2d..."},e.prototype.onUpdate=function(t){this._tipsLabel.string="\u52a0\u8f7d\u4e2d"+t.finished+"/"+t.total+"..."},e.prototype.onHide=function(){t.prototype.onHide.call(this)},e.prototype.onDestroy=function(t){t&&cc.assetManager.releaseAsset(cc.resources.get(e.prefabUrl,cc.Prefab))},e.typeKey="LoadingView",e.prefabUrl="display-ctrl-test-views/LoadingView",e}(r.NodeCtrl);o.LoadingView=c,cc._RF.pop()},{"../../../src/Utils":"Utils","../DpcTestLayerType":"DpcTestLayerType","../setDpcTestModuleMap":"setDpcTestModuleMap","@ailhc/dpctrl-ccc":4}],ModuleMap:[function(t,e,o){"use strict";cc._RF.push(e,"dcdf1nm3cpCeawyTr2Uh63Z","ModuleMap"),Object.defineProperty(o,"__esModule",{value:!0}),o.setModuleMap=o.m=void 0,o.setModuleMap=function(t){o.m=t},cc._RF.pop()},{}],MutiInsView:[function(t,e,o){"use strict";cc._RF.push(e,"3964dJiyhtF76B6YbeSYXso","MutiInsView");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0}),o.MutiInsView=void 0;var r=t("@ailhc/dpctrl-ccc"),i=t("../../../src/Utils"),s=t("../DpcTestLayerType"),a=t("../setDpcTestModuleMap"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.prefabUrl="display-ctrl-test-views/MutiInsView",e}return n(e,t),e.prototype.getRess=function(){return[{path:this.prefabUrl,type:cc.Prefab}]},e.prototype.onInit=function(){this._tips=["\u8001\u94c1\uff0cO(\u2229_\u2229)O\u8c22\u8c22\uff01","\u8001\u94c1\uff0c\u53cc\u51fb666","EasyGameFramework\u6846\u67b6","\u8de8\u5f15\u64ce","\u9ad8\u6548\u6613\u7528"],this.node=i.getPrefabNodeByPath(this.prefabUrl);var t=i.getChild(this.node,"tips");this._tipsLabel=t.getComponent(cc.Label),this._animComp=this.node.getComponent(cc.Animation)},e.prototype.onShow=function(e){var o=this;t.prototype.onShow.call(this,e);var n=i.getRandomArrayElements(this._tips,1);this._tipsLabel.string=e.onShowData.preStr+"_"+n+"_x"+e.onShowData.clickCount,a.dtM.layerMgr.addNodeToLayer(this.node,s.DpcTestLayerType.EFFECT_UI),this._animComp.play(),this._animComp.once(cc.Animation.EventType.FINISHED,function(){o.onHide()})},e.typeKey="MutiInsView",e}(r.NodeCtrl);o.MutiInsView=c,cc._RF.pop()},{"../../../src/Utils":"Utils","../DpcTestLayerType":"DpcTestLayerType","../setDpcTestModuleMap":"setDpcTestModuleMap","@ailhc/dpctrl-ccc":4}],TestMain:[function(t,e,o){"use strict";cc._RF.push(e,"c6330tAaN9MqYtEI/cQjewv","TestMain");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./ListItem"),s=cc._decorator,a=s.ccclass,c=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.backBatn=null,e.casesContainer=null,e.loading=null,e.title=null,e.listItemPrefab=null,e.sceneList=[],e}return n(e,t),e.prototype.onLoad=function(){this.loading.active=!1},e.prototype.start=function(){cc.game.addPersistRootNode(this.backBatn.node.parent),this.initList()},e.prototype.initList=function(){var t=cc.game._sceneInfos;console.log(t);var e={};if(t)for(var o=0;o<t.length;++o){if((l=t[o].url).startsWith("db://assets/tests/")){var n=cc.path.dirname(l).replace("db://assets/tests/",""),r=cc.path.basename(l,".fire");n||(n="_root"),e[n]||(e[n]={}),e[n][r]=l}}else cc.error("failed to get scene list!");console.log(e);var s=Object.keys(e);s.sort();for(o=0;o<s.length;++o){this.sceneList.push({name:s[o],url:null});var a=Object.keys(e[s[o]]);a.sort();for(var c=0;c<a.length;++c){var p=a[c],l=e[s[o]][p];this.sceneList.push({name:p,url:l});var u=cc.instantiate(this.listItemPrefab).getComponent(i.default);u.init(p,this._onClickItem.bind(this,l)),this.casesContainer.addChild(u.node)}}},e.prototype._onClickItem=function(t){var e=this;this.loading.active=!0,cc.director.loadScene(t,function(){e.title.string=t,e.casesContainer.parent.parent.active=!1,e.loading.active=!1})},e.prototype.clickBack=function(){var t=this;cc.director.loadScene("Main.fire",function(){t.title.string="TestMain",t.casesContainer.parent.parent.active=!0})},r([c(cc.Button)],e.prototype,"backBatn",void 0),r([c(cc.Node)],e.prototype,"casesContainer",void 0),r([c(cc.Node)],e.prototype,"loading",void 0),r([c(cc.Label)],e.prototype,"title",void 0),r([c(cc.Prefab)],e.prototype,"listItemPrefab",void 0),e=r([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./ListItem":"ListItem"}],Utils:[function(t,e,o){"use strict";cc._RF.push(e,"7b3885nqZxAQIH7vPHqZX7S","Utils"),Object.defineProperty(o,"__esModule",{value:!0}),o.getSomeRandomInt=o.getRandomArrayElements=o.getComp=o.getChild=o.getPrefabNodeByPath=void 0,o.getPrefabNodeByPath=function(t){var e=cc.resources.get(t,cc.Prefab);return cc.instantiate(e)},o.getChild=function(t,e){if(t&&t.childrenCount){var o,n=t,r=e.split("/");r.reverse();var i=-1,s=function(t,e){if(t.name===o)return!0};o=r.pop();do{n=(i=n.children.findIndex(s))>-1?n.children[i]:void 0,o=r.pop()}while(n&&o);return n}},o.getComp=function(t,e){return t.getComponent(e)},o.getRandomArrayElements=function(t,e){if(!(0==t.length||0==e||e>t.length)){for(var o,n,r=t.slice(0),i=t.length,s=i-e;i-- >s;)o=r[n=Math.floor((i+1)*Math.random())],r[n]=r[i],r[i]=o;return r.slice(s)}},o.getSomeRandomInt=function(t,e,o){var n,r,i=[];for(Math.abs(e-t)+1<o&&(o=Math.abs(e-t)+1),n=0;n<o;n++)r=Math.floor(Math.random()*(e-t+1)+t),i.indexOf(r)<0?i.push(r):n--;return i},cc._RF.pop()},{}],setDpcTestModuleMap:[function(t,e,o){"use strict";cc._RF.push(e,"fd5b6rvQtpOb6FbV1QUKoLw","setDpcTestModuleMap"),Object.defineProperty(o,"__esModule",{value:!0}),o.setDpcTestModuleMap=o.dtM=void 0,o.setDpcTestModuleMap=function(t){o.dtM=t},cc._RF.pop()},{}],testBroadcast:[function(t,e,o){"use strict";cc._RF.push(e,"e261dUK4X9PDZgJPOVBKc0r","testBroadcast");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var i=t("@ailhc/broadcast"),s=cc._decorator,a=s.ccclass,c=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.broadcastAEdit=null,e.reciveAOnceLabel=null,e.reciveALabel=null,e.clickListenATipsLabel=null,e.clickOffListenA=null,e.broadcastBEdit=null,e.reciveBLabel=null,e.clickListenBTipsLabel=null,e.clickOffListenB=null,e.broadcastCEdit=null,e.callbackCEdit=null,e.reciveCLabel=null,e.callbackCLabel=null,e.broadcastDEdit=null,e.clickGetDValueTipsLabel=null,e.listenDShowLabel=null,e.clickGetDValueShowLabel=null,e}return n(e,t),e.prototype.start=function(){var t=this;this._broadcast=new i.Broadcast,this._broadcast.on({key:"testA",listener:function(e){t.reciveALabel.string=e}});var e=function(e){t.reciveAOnceLabel.string=e};this.clickListenATipsLabel.node.on(cc.Node.EventType.MOUSE_DOWN,function(){t._broadcast.on({key:"testA",listener:e,once:!0})}),this.clickOffListenA.on(cc.Node.EventType.MOUSE_DOWN,function(){t._broadcast.off("testA",e)});var o=function(e){t.reciveBLabel.string=e};this.clickListenBTipsLabel.node.on(cc.Node.EventType.MOUSE_DOWN,function(){t._broadcast.on({key:"testB",listener:o})}),this.clickOffListenB.on(cc.Node.EventType.MOUSE_DOWN,function(){t._broadcast.off("testB",o)}),this._broadcast.on({key:"testC",listener:function(e,o){t.reciveCLabel.string=e;var n=t.callbackCEdit.textLabel.string;n&&""!==n.trim()?o&&o(n):alert("\u8fd4\u56deC\u6d88\u606f\u4e3a\u7a7a,\u8bf7\u8f93\u5165\u6d88\u606f")}}),this._broadcast.on({key:"testD",listener:function(e){t.listenDShowLabel.string=e}}),this.clickGetDValueTipsLabel.node.on(cc.Node.EventType.MOUSE_DOWN,function(){var e=t._broadcast.value("testD");t.clickGetDValueShowLabel.string=e})},e.prototype.broadcastA=function(){var t=this.broadcastAEdit.textLabel.string;t&&""!==t.trim()?this._broadcast.broadcast("testA",t):alert("A\u6d88\u606f\u4e3a\u7a7a,\u8bf7\u8f93\u5165\u6d88\u606f")},e.prototype.broadcastB=function(){var t=this.broadcastBEdit.textLabel.string;t&&""!==t.trim()?this._broadcast.stickyBroadcast("testB",t):alert("B\u6d88\u606f\u4e3a\u7a7a,\u8bf7\u8f93\u5165\u6d88\u606f")},e.prototype.broadcastC=function(){var t=this,e=this.broadcastCEdit.textLabel.string;e&&""!==e.trim()?this._broadcast.broadcast("testC",e,function(e){t.callbackCLabel.string=e}):alert("C\u6d88\u606f\u4e3a\u7a7a,\u8bf7\u8f93\u5165\u6d88\u606f")},e.prototype.broadcastD=function(){var t=this.broadcastDEdit.textLabel.string;t&&""!==t.trim()?this._broadcast.broadcast("testD",t,null,!0):alert("D\u6d88\u606f\u4e3a\u7a7a,\u8bf7\u8f93\u5165\u6d88\u606f")},r([c(cc.EditBox)],e.prototype,"broadcastAEdit",void 0),r([c(cc.Label)],e.prototype,"reciveAOnceLabel",void 0),r([c(cc.Label)],e.prototype,"reciveALabel",void 0),r([c(cc.Label)],e.prototype,"clickListenATipsLabel",void 0),r([c(cc.Node)],e.prototype,"clickOffListenA",void 0),r([c(cc.EditBox)],e.prototype,"broadcastBEdit",void 0),r([c(cc.Label)],e.prototype,"reciveBLabel",void 0),r([c(cc.Label)],e.prototype,"clickListenBTipsLabel",void 0),r([c(cc.Node)],e.prototype,"clickOffListenB",void 0),r([c(cc.EditBox)],e.prototype,"broadcastCEdit",void 0),r([c(cc.EditBox)],e.prototype,"callbackCEdit",void 0),r([c(cc.Label)],e.prototype,"reciveCLabel",void 0),r([c(cc.Label)],e.prototype,"callbackCLabel",void 0),r([c(cc.EditBox)],e.prototype,"broadcastDEdit",void 0),r([c(cc.Label)],e.prototype,"clickGetDValueTipsLabel",void 0),r([c(cc.Label)],e.prototype,"listenDShowLabel",void 0),r([c(cc.Label)],e.prototype,"clickGetDValueShowLabel",void 0),e=r([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"@ailhc/broadcast":1}]},{},["AppMainComp","DemoModule","FrameworkLoader","LayerType","ModuleMap","Utils","ListItem","TestMain","testBroadcast","DpcTestLayerType","DpcTestMainComp","setDpcTestModuleMap","AnimView","CustomResHandleView","DepResView","LoadingView","MutiInsView"]);